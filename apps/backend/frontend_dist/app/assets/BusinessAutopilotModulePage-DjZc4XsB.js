import{b as we,j as e,r as p,a as ue,T as bt}from"./index-CsafN1Zc.js";const Ie=["India","United States","United Arab Emirates","United Kingdom","Singapore","Australia","Canada"],gt=Array.from(new Set(we.map(l=>String((l==null?void 0:l.label)||"").trim()).filter(Boolean))).sort((l,h)=>{const o=Ie.indexOf(l),N=Ie.indexOf(h);return o!==-1||N!==-1?o===-1?1:N===-1?-1:o-N:l.localeCompare(h)}),fe=Array.from(new Set(we.map(l=>String((l==null?void 0:l.code)||"").trim()).filter(Boolean))).sort((l,h)=>l==="+91"?-1:h==="+91"?1:l.localeCompare(h,void 0,{numeric:!0})),xt={India:["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],"United States":["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],Canada:["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Nova Scotia","Ontario","Prince Edward Island","Quebec","Saskatchewan","Northwest Territories","Nunavut","Yukon"],Australia:["New South Wales","Victoria","Queensland","Western Australia","South Australia","Tasmania","Australian Capital Territory","Northern Territory"],"United Arab Emirates":["Abu Dhabi","Ajman","Dubai","Fujairah","Ras Al Khaimah","Sharjah","Umm Al Quwain"],"United Kingdom":["England","Scotland","Wales","Northern Ireland"],Singapore:["Central Region","East Region","North Region","North-East Region","West Region"],Malaysia:["Johor","Kedah","Kelantan","Malacca","Negeri Sembilan","Pahang","Penang","Perak","Perlis","Sabah","Sarawak","Selangor","Terengganu","Kuala Lumpur","Labuan","Putrajaya"],"Saudi Arabia":["Riyadh","Makkah","Madinah","Eastern Province","Asir","Tabuk","Qassim","Hail","Jazan","Najran","Al Bahah","Al Jawf","Northern Borders"],"South Africa":["Eastern Cape","Free State","Gauteng","KwaZulu-Natal","Limpopo","Mpumalanga","Northern Cape","North West","Western Cape"],Germany:["Baden-Wurttemberg","Bavaria","Berlin","Brandenburg","Bremen","Hamburg","Hesse","Lower Saxony","Mecklenburg-Vorpommern","North Rhine-Westphalia","Rhineland-Palatinate","Saarland","Saxony","Saxony-Anhalt","Schleswig-Holstein","Thuringia"]};function yt(l){const h=String(l||"").trim();return xt[h]||[]}const Me="wz_business_autopilot_projects_module",Le="wz_business_autopilot_crm_module",Re="wz_business_autopilot_hr_module",ft="wz_business_autopilot_ticketing_module",Nt="wz_business_autopilot_stocks_module",ce="wz_business_autopilot_accounts_module",jt=5,Oe={crm:{title:"CRM",subtitle:"Manage leads, deals, and customer follow-ups.",stats:[{label:"Open Leads",value:"24"},{label:"Pipeline Value",value:"INR 8.4L"},{label:"Follow-ups Today",value:"11"}],sections:["Lead pipeline board","Deal stage tracking","Activity timeline","Contact import/export"]},hrm:{title:"HR",subtitle:"Handle employees, attendance, and payroll workflows.",stats:[{label:"Employees",value:"42"},{label:"Attendance Today",value:"89%"},{label:"Pending Leaves",value:"6"}],sections:["Employee directory","Attendance and shifts","Leave approvals","Payroll run setup"]},projects:{title:"Project Management",subtitle:"Track project milestones, tasks, and team delivery."},accounts:{title:"Accounts",subtitle:"Control billing, expenses, GST, and accounting reports.",stats:[{label:"Invoices This Month",value:"126"},{label:"Receivables",value:"INR 3.2L"},{label:"GST Status",value:"Ready"}],sections:["Invoice and billing","Expense tracking","GST reports","Vendor and purchase entries"]},ticketing:{title:"Ticketing System",subtitle:"Track support tickets, priorities, SLA, and team resolution workflows.",stats:[{label:"Open Tickets",value:"18"},{label:"Pending Today",value:"7"},{label:"Avg Resolution",value:"4h 20m"}],sections:["Ticket queue and status board","Priority and SLA tracking","Agent assignment and ownership","Customer issue comments and history"]},stocks:{title:"Stocks Management",subtitle:"Manage inventory levels, stock movement, reorder alerts, and warehouses.",stats:[{label:"Items In Stock",value:"428"},{label:"Low Stock Alerts",value:"12"},{label:"Warehouses",value:"3"}],sections:["Inventory items master","Stock in / stock out entries","Low-stock reorder alerts","Warehouse-wise quantity tracking"]}},X={leads:{label:"Leads",itemLabel:"Lead",icon:"bi-person-plus",columns:[{key:"name",label:"Lead Name"},{key:"company",label:"Company"},{key:"phone",label:"Phone"},{key:"stage",label:"Stage"},{key:"status",label:"Status"}],fields:[{key:"name",label:"Lead Name",placeholder:"Enter lead name"},{key:"company",label:"Company",placeholder:"Company / Business name"},{key:"phone",label:"Phone",placeholder:"Mobile number"},{key:"stage",label:"Stage",placeholder:"New / Qualified / Proposal"},{key:"status",label:"Status",placeholder:"Open / Closed / Converted"}]},contacts:{label:"Contacts",itemLabel:"Contact",icon:"bi-person-lines-fill",columns:[{key:"name",label:"Name"},{key:"company",label:"Company"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"tag",label:"Tag"}],fields:[{key:"name",label:"Name",placeholder:"Contact name"},{key:"company",label:"Company",placeholder:"Company name"},{key:"email",label:"Email",placeholder:"contact@example.com"},{key:"phoneCountryCode",label:"Country Code",type:"select",options:fe,defaultValue:"+91"},{key:"phone",label:"Phone",placeholder:"Phone number"},{key:"tag",label:"Tag",placeholder:"Customer / Prospect / Vendor"}]},deals:{label:"Deals",itemLabel:"Deal",icon:"bi-currency-rupee",columns:[{key:"dealName",label:"Deal Name"},{key:"company",label:"Company"},{key:"stage",label:"Stage"},{key:"amount",label:"Amount"},{key:"status",label:"Status"}],fields:[{key:"dealName",label:"Deal Name",placeholder:"ERP rollout annual contract"},{key:"company",label:"Company",placeholder:"Customer company"},{key:"stage",label:"Stage",placeholder:"Discovery / Proposal / Negotiation"},{key:"amount",label:"Amount",placeholder:"INR amount"},{key:"status",label:"Status",placeholder:"Open / Won / Lost"}]},followUps:{label:"Follow-ups",itemLabel:"Follow-up",icon:"bi-telephone-forward",columns:[{key:"subject",label:"Subject"},{key:"relatedTo",label:"Related To"},{key:"dueDate",label:"Due Date"},{key:"owner",label:"Owner"},{key:"status",label:"Status"}],fields:[{key:"subject",label:"Subject",placeholder:"Demo callback / pricing follow-up"},{key:"relatedTo",label:"Related To",placeholder:"Lead / Contact / Deal name"},{key:"dueDate",label:"Due Date",placeholder:"YYYY-MM-DD"},{key:"owner",label:"Owner",placeholder:"Sales owner"},{key:"status",label:"Status",placeholder:"Pending / Done / Missed"}]},activities:{label:"Activities",itemLabel:"Activity",icon:"bi-clock-history",columns:[{key:"activityType",label:"Activity Type"},{key:"relatedTo",label:"Related To"},{key:"date",label:"Date"},{key:"owner",label:"Owner"},{key:"notes",label:"Notes"}],fields:[{key:"activityType",label:"Activity Type",placeholder:"Call / Meeting / Demo / Email"},{key:"relatedTo",label:"Related To",placeholder:"Lead / Deal / Contact"},{key:"date",label:"Date",placeholder:"YYYY-MM-DD"},{key:"owner",label:"Owner",placeholder:"User name"},{key:"notes",label:"Notes",placeholder:"Short activity notes"}]},meetings:{label:"Meetings",itemLabel:"Meeting",icon:"bi-calendar-event",columns:[{key:"title",label:"Meeting Title"},{key:"relatedTo",label:"Related To"},{key:"meetingDate",label:"Date"},{key:"meetingTime",label:"Time"},{key:"owner",label:"Owner"},{key:"reminderSummary",label:"Reminder"},{key:"status",label:"Status"}],fields:[{key:"title",label:"Meeting Title",placeholder:"Client demo / Follow-up call"},{key:"relatedTo",label:"Related To",placeholder:"Lead / Contact / Deal / Company"},{key:"meetingDate",label:"Meeting Date",type:"date"},{key:"meetingTime",label:"Meeting Time",type:"time"},{key:"owner",label:"Owner",placeholder:"Sales owner / Team member"},{key:"meetingMode",label:"Meeting Mode",type:"select",options:["Online","Offline","Phone"],defaultValue:"Online"},{key:"reminderChannel",label:"Reminder Channel",type:"select",options:["App Alert","Email","SMS","WhatsApp"],defaultValue:"App Alert"},{key:"reminderMinutes",label:"Reminder Before (Minutes)",type:"select",options:["5","10","15","30","60","120","1440"],defaultValue:"15"},{key:"status",label:"Status",type:"select",options:["Scheduled","Completed","Rescheduled","Cancelled"],defaultValue:"Scheduled"}]}},vt={leads:[{id:"crm_l1",name:"Ravi Kumar",company:"Ultra HD Prints",phone:"9876543210",stage:"Qualified",status:"Open"},{id:"crm_l2",name:"Priya N",company:"North India Jewels",phone:"9123456780",stage:"Proposal",status:"Open"}],contacts:[{id:"crm_c1",name:"Ravi Kumar",company:"Ultra HD Prints",email:"ravi@uhdprints.example",phoneCountryCode:"+91",phone:"9876543210",tag:"Customer"},{id:"crm_c2",name:"Priya N",company:"North India Jewels",email:"priya@nij.example",phoneCountryCode:"+91",phone:"9123456780",tag:"Prospect"}],deals:[{id:"crm_d1",dealName:"POS Billing Setup",company:"Ultra HD Prints",stage:"Negotiation",amount:"85000",status:"Open"},{id:"crm_d2",dealName:"WhatsApp Campaign Suite",company:"North India Jewels",stage:"Proposal",amount:"42000",status:"Open"}],followUps:[{id:"crm_f1",subject:"Demo callback",relatedTo:"Ultra HD Prints",dueDate:"2026-02-25",owner:"GP Prakash",status:"Pending"},{id:"crm_f2",subject:"Pricing confirmation",relatedTo:"North India Jewels",dueDate:"2026-02-25",owner:"GP Prakash",status:"Pending"}],activities:[{id:"crm_a1",activityType:"Call",relatedTo:"Ultra HD Prints",date:"2026-02-24",owner:"GP Prakash",notes:"Discussed rollout scope"},{id:"crm_a2",activityType:"Email",relatedTo:"North India Jewels",date:"2026-02-24",owner:"GP Prakash",notes:"Sent proposal PDF"}],meetings:[{id:"crm_m1",title:"Ultra HD Prints Demo",relatedTo:"Ultra HD Prints",meetingDate:"2026-02-26",meetingTime:"11:00",owner:"GP Prakash",meetingMode:"Online",reminderChannel:"WhatsApp",reminderMinutes:"30",status:"Scheduled",reminderSummary:"WhatsApp • 30 min before"},{id:"crm_m2",title:"North India Jewels Pricing Call",relatedTo:"North India Jewels",meetingDate:"2026-02-27",meetingTime:"16:30",owner:"GP Prakash",meetingMode:"Phone",reminderChannel:"App Alert",reminderMinutes:"15",status:"Scheduled",reminderSummary:"App Alert • 15 min before"}]},le={projects:{label:"Projects",itemLabel:"Project",columns:[{key:"name",label:"Project Name"},{key:"owner",label:"Owner"},{key:"status",label:"Status"}],fields:[{key:"name",label:"Project Name",placeholder:"Enter project name"},{key:"owner",label:"Owner",placeholder:"Enter owner name"},{key:"status",label:"Status",placeholder:"Active / Planned / Hold"}]},tasks:{label:"Tasks",itemLabel:"Task",columns:[{key:"title",label:"Task"},{key:"assignee",label:"Assignee"},{key:"dueDate",label:"Due Date"}],fields:[{key:"title",label:"Task",placeholder:"Enter task title"},{key:"assignee",label:"Assignee",placeholder:"Enter assignee name"},{key:"dueDate",label:"Due Date",placeholder:"YYYY-MM-DD"}]},milestones:{label:"Milestones",itemLabel:"Milestone",columns:[{key:"title",label:"Milestone"},{key:"project",label:"Project"},{key:"targetDate",label:"Target Date"}],fields:[{key:"title",label:"Milestone",placeholder:"Enter milestone title"},{key:"project",label:"Project",placeholder:"Enter project name"},{key:"targetDate",label:"Target Date",placeholder:"YYYY-MM-DD"}]},team:{label:"Team",itemLabel:"Team Member",columns:[{key:"name",label:"Name"},{key:"role",label:"Role"},{key:"project",label:"Project"}],fields:[{key:"name",label:"Name",placeholder:"Enter member name"},{key:"role",label:"Role",placeholder:"Enter role"},{key:"project",label:"Project",placeholder:"Enter project name"}]}},St={projects:[{id:"p1",name:"ERP Rollout",owner:"Guru",status:"Active"},{id:"p2",name:"HR Automation",owner:"Nithya",status:"Planned"}],tasks:[{id:"t1",title:"Finalize sprint board",assignee:"Guru",dueDate:"2026-02-20"},{id:"t2",title:"Client approval review",assignee:"Arun",dueDate:"2026-02-22"}],milestones:[{id:"m1",title:"Phase 1 Go-Live",project:"ERP Rollout",targetDate:"2026-03-10"},{id:"m2",title:"Payroll Cutover",project:"HR Automation",targetDate:"2026-03-25"}],team:[{id:"u1",name:"Guru",role:"Project Manager",project:"ERP Rollout"},{id:"u2",name:"Nithya",role:"Business Analyst",project:"HR Automation"}]},ne={employees:{label:"Employees",itemLabel:"Employee",columns:[{key:"name",label:"Name"},{key:"department",label:"Department"},{key:"designation",label:"Designation"}],fields:[{key:"name",label:"Name",placeholder:"Enter employee name"},{key:"department",label:"Department",placeholder:"HR / Sales / Engineering"},{key:"designation",label:"Designation",placeholder:"Executive / Manager"}]},attendance:{label:"Attendance",itemLabel:"Attendance Entry",columns:[{key:"employee",label:"Employee"},{key:"date",label:"Date"},{key:"status",label:"Status"}],fields:[{key:"employee",label:"Employee",placeholder:"Enter employee name"},{key:"date",label:"Date",placeholder:"YYYY-MM-DD"},{key:"status",label:"Status",placeholder:"Present / Half Day / Leave"}]},leaves:{label:"Leaves",itemLabel:"Leave Request",columns:[{key:"employee",label:"Employee"},{key:"leaveType",label:"Leave Type"},{key:"status",label:"Status"}],fields:[{key:"employee",label:"Employee",placeholder:"Enter employee name"},{key:"leaveType",label:"Leave Type",placeholder:"Sick / Casual / Paid"},{key:"status",label:"Status",placeholder:"Pending / Approved / Rejected"}]},payroll:{label:"Payroll",itemLabel:"Payroll Entry",columns:[{key:"employee",label:"Employee"},{key:"month",label:"Month"},{key:"salary",label:"Net Salary"}],fields:[{key:"employee",label:"Employee",placeholder:"Enter employee name"},{key:"month",label:"Month",placeholder:"YYYY-MM"},{key:"salary",label:"Net Salary",placeholder:"INR amount"}]}},kt={employees:[{id:"e1",name:"Guru",department:"Engineering",designation:"Project Lead"},{id:"e2",name:"Nithya",department:"HR",designation:"HR Executive"}],attendance:[{id:"a1",employee:"Guru",date:"2026-02-19",status:"Present"},{id:"a2",employee:"Nithya",date:"2026-02-19",status:"Present"}],leaves:[{id:"l1",employee:"Arun",leaveType:"Sick",status:"Pending"},{id:"l2",employee:"Kiran",leaveType:"Casual",status:"Approved"}],payroll:[{id:"pr1",employee:"Guru",month:"2026-02",salary:"INR 85,000"},{id:"pr2",employee:"Nithya",month:"2026-02",salary:"INR 42,000"}]},Ct={mainCategories:{label:"Main Category",itemLabel:"Main Category",columns:[{key:"name",label:"Category Name"},{key:"department",label:"Department"},{key:"sla",label:"SLA"}],fields:[{key:"name",label:"Category Name",placeholder:"Technical Support / Billing"},{key:"department",label:"Department",placeholder:"Support / Accounts / Sales"},{key:"sla",label:"SLA",placeholder:"4h / 8h / 24h"}]},subCategories:{label:"Sub Category",itemLabel:"Sub Category",columns:[{key:"name",label:"Sub Category"},{key:"mainCategory",label:"Main Category"},{key:"priority",label:"Default Priority"}],fields:[{key:"name",label:"Sub Category",placeholder:"Login Issue / Refund / Installation"},{key:"mainCategory",label:"Main Category",placeholder:"Technical Support"},{key:"priority",label:"Default Priority",placeholder:"Low / Medium / High"}]},tickets:{label:"Tickets",itemLabel:"Ticket",columns:[{key:"ticketNo",label:"Ticket No"},{key:"subject",label:"Subject"},{key:"category",label:"Category"},{key:"status",label:"Status"}],fields:[{key:"ticketNo",label:"Ticket No",placeholder:"TK-1001"},{key:"subject",label:"Subject",placeholder:"Customer login issue"},{key:"category",label:"Category",placeholder:"Technical Support / Login Issue"},{key:"status",label:"Status",placeholder:"Open / In Progress / Closed"}]}},Tt={mainCategories:[{id:"tm1",name:"Technical Support",department:"Support",sla:"4h"},{id:"tm2",name:"Billing",department:"Accounts",sla:"8h"}],subCategories:[{id:"ts1",name:"Login Issue",mainCategory:"Technical Support",priority:"High"},{id:"ts2",name:"Refund Request",mainCategory:"Billing",priority:"Medium"}],tickets:[{id:"tt1",ticketNo:"TK-1001",subject:"Customer login issue",category:"Technical Support / Login Issue",status:"Open"},{id:"tt2",ticketNo:"TK-1002",subject:"Refund follow-up",category:"Billing / Refund Request",status:"In Progress"}]},Dt={items:{label:"Stock Items",itemLabel:"Stock Item",columns:[{key:"itemName",label:"Item Name"},{key:"sku",label:"SKU"},{key:"category",label:"Category"},{key:"qty",label:"Qty"}],fields:[{key:"itemName",label:"Item Name",placeholder:"Dell Laptop 14"},{key:"sku",label:"SKU",placeholder:"DL-14-001"},{key:"category",label:"Category",placeholder:"Electronics / Laptops"},{key:"qty",label:"Qty",placeholder:"25"}]},mainCategories:{label:"Main Category",itemLabel:"Main Category",columns:[{key:"name",label:"Category Name"},{key:"code",label:"Code"},{key:"warehouse",label:"Warehouse"}],fields:[{key:"name",label:"Category Name",placeholder:"Electronics / Stationery / Spares"},{key:"code",label:"Code",placeholder:"ELEC / STAT / SPR"},{key:"warehouse",label:"Warehouse",placeholder:"Main Warehouse"}]},subCategories:{label:"Sub Category",itemLabel:"Sub Category",columns:[{key:"name",label:"Sub Category"},{key:"mainCategory",label:"Main Category"},{key:"reorderLevel",label:"Reorder Level"}],fields:[{key:"name",label:"Sub Category",placeholder:"Laptops / Keyboards / Toners"},{key:"mainCategory",label:"Main Category",placeholder:"Electronics"},{key:"reorderLevel",label:"Reorder Level",placeholder:"10 / 25 / 50"}]}},Et={mainCategories:[{id:"sm1",name:"Electronics",code:"ELEC",warehouse:"Main Warehouse"},{id:"sm2",name:"Office Supplies",code:"OFF",warehouse:"Store Room"}],subCategories:[{id:"ss1",name:"Laptops",mainCategory:"Electronics",reorderLevel:"5"},{id:"ss2",name:"Printers",mainCategory:"Electronics",reorderLevel:"3"}],items:[{id:"si1",itemName:"Dell Latitude 5440",sku:"DL5440",category:"Electronics / Laptops",qty:"12"},{id:"si2",itemName:"HP LaserJet Pro",sku:"HPLJPRO",category:"Electronics / Printers",qty:"4"}]},me=["Active","Inactive"],_e=["Draft","Sent","Approved","Rejected","Converted"],$e=["Draft","Sent","Partially Paid","Paid","Overdue","Cancelled"],At={customers:[{id:"cust_1",name:"Ultra HD Prints",gstin:"33ABCDE1234F1Z5",phone:"9876543210",email:"accounts@ultrahdprints.example",billingAddress:"No 17, 2nd Cross Street, Venkateswara Nagar"}],itemMasters:[{id:"itm_1",name:"POS Billing Setup",sku:"POS-SETUP",unit:"Nos",defaultRate:"24999",taxPercent:"18"},{id:"itm_2",name:"Thermal Printer",sku:"THERMAL-PRN",unit:"Nos",defaultRate:"15000",taxPercent:"18"}],gstTemplates:[{id:"gst_1",name:"India GST 18% (Intra State)",taxScope:"Intra State",cgst:"9",sgst:"9",igst:"0",cess:"0",status:"Active",notes:"Default GST for local billing"},{id:"gst_2",name:"India GST 18% (Inter State)",taxScope:"Inter State",cgst:"0",sgst:"0",igst:"18",cess:"0",status:"Active",notes:"Use for interstate billing"}],billingTemplates:[{id:"bt_1",name:"Default GST Invoice Template",docType:"Invoice",gstTemplateId:"gst_1",prefix:"INV",themeColor:"#22c55e",footerNote:"Thank you for your business.",termsText:"Payment due within 7 days.",status:"Active"},{id:"bt_2",name:"Estimate Proposal Template",docType:"Estimate",gstTemplateId:"gst_1",prefix:"EST",themeColor:"#3b82f6",footerNote:"Estimate validity: 15 days.",termsText:"Subject to stock availability.",status:"Active"}],estimates:[{id:"est_1",docNo:"EST-1001",customerName:"Ultra HD Prints",customerGstin:"33ABCDE1234F1Z5",issueDate:"2026-02-20",dueDate:"2026-02-27",status:"Sent",gstTemplateId:"gst_1",billingTemplateId:"bt_2",salesperson:"Guru",billingAddress:"No 17, 2nd Cross Street, Venkateswara Nagar",notes:"Quote includes installation support.",termsText:"Advance 50% before order confirmation.",items:[{id:"eli_1",description:"Thermal Printer",qty:"2",rate:"15000",taxPercent:"18"},{id:"eli_2",description:"Barcode Scanner",qty:"4",rate:"3500",taxPercent:"18"}]}],invoices:[{id:"inv_1",docNo:"INV-1001",customerName:"Ultra HD Prints",customerGstin:"33ABCDE1234F1Z5",issueDate:"2026-02-24",dueDate:"2026-03-03",status:"Draft",gstTemplateId:"gst_1",billingTemplateId:"bt_1",salesperson:"Guru",billingAddress:"No 17, 2nd Cross Street, Venkateswara Nagar",notes:"Thanks for your business.",termsText:"Due on receipt.",items:[{id:"ili_1",description:"POS Billing Setup",qty:"1",rate:"24999",taxPercent:"18"}]}]};function J(l){const h=Number(l||0);return Number.isFinite(h)?h:0}function ae(l){return`INR ${J(l).toLocaleString("en-IN",{maximumFractionDigits:2})}`}function Ne(l){return J(l==null?void 0:l.cgst)+J(l==null?void 0:l.sgst)+J(l==null?void 0:l.igst)+J(l==null?void 0:l.cess)}function ee(){return{id:`line_${Date.now()}_${Math.random().toString(36).slice(2,7)}`,itemMasterId:"",description:"",qty:"1",rate:"",taxPercent:""}}function Z(l="invoice"){const h=l==="estimate"?"EST":"INV",o=new Date().toISOString().slice(0,10);return{id:"",docNo:`${h}-${Date.now().toString().slice(-6)}`,customerName:"",customerGstin:"",issueDate:o,dueDate:o,status:"Draft",gstTemplateId:"",billingTemplateId:"",salesperson:"",billingAddress:"",notes:"",termsText:"",items:[ee()]}}function de(l,h){const o=(h||[]).find(T=>T.id===l.gstTemplateId),N=o?Ne(o):0,L=Array.isArray(l==null?void 0:l.items)?l.items:[];let S=0,R=0;return L.forEach(T=>{const x=J(T.qty),$=J(T.rate),w=x*$,O=J(T.taxPercent||N);S+=w,R+=w*(O/100)}),{subtotal:S,taxTotal:R,grandTotal:S+R}}function W(l){return l.reduce((h,o)=>(h[o.key]=o.defaultValue??"",h),{})}function Pt(l){return l&&typeof l=="object"&&Object.keys(le).every(h=>Array.isArray(l[h]))}function It(l){return l&&typeof l=="object"&&Object.keys(ne).every(h=>Array.isArray(l[h]))}function Mt(l){return l&&typeof l=="object"&&Object.keys(X).every(h=>Array.isArray(l[h]))}function Lt(l,h){return l&&typeof l=="object"&&Object.keys(h).every(o=>Array.isArray(l[o]))}function ye(l){return l&&typeof l=="object"&&Array.isArray(l.customers)&&Array.isArray(l.itemMasters)&&Array.isArray(l.gstTemplates)&&Array.isArray(l.billingTemplates)&&Array.isArray(l.estimates)&&Array.isArray(l.invoices)}function Q({title:l,badgeLabel:h="",rows:o=[],columns:N=[],renderCells:L,renderActions:S,noRowsText:R="No rows found.",searchPlaceholder:T="Search",searchBy:x,pageSize:$=jt,withoutOuterCard:w=!1}){const[O,E]=p.useState(""),[A,I]=p.useState(1),B=p.useMemo(()=>{const n=String(O||"").trim().toLowerCase();return n?o.filter(y=>(typeof x=="function"?String(x(y)||""):Object.values(y||{}).join(" ")).toLowerCase().includes(n)):o},[o,x,O]),r=B.length,b=Math.max(1,Math.ceil(r/$)),f=Math.min(A,b),v=(f-1)*$,_=B.slice(v,v+$),M=r?v+1:0,Y=r?v+_.length:0;return p.useEffect(()=>{I(1)},[O,o.length]),p.useEffect(()=>{A>b&&I(b)},[A,b]),e.jsxs("div",{className:w?"":"card p-3",children:[e.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3",children:[e.jsx("h6",{className:"mb-0",children:l}),e.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[h?e.jsx("span",{className:"badge bg-secondary",children:h}):null,e.jsxs("label",{className:"table-search mb-0",children:[e.jsx("i",{className:"bi bi-search","aria-hidden":"true"}),e.jsx("input",{type:"search",placeholder:T,value:O,onChange:n=>E(n.target.value)})]})]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-dark table-borderless align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[N.map(n=>e.jsx("th",{children:n.label},n.key||n.label)),S?e.jsx("th",{className:"text-end",children:"Action"}):null]})}),e.jsx("tbody",{children:_.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:N.length+(S?1:0),className:"text-secondary",children:R})}):_.map((n,y)=>e.jsxs("tr",{children:[L(n).map((P,m)=>e.jsx("td",{style:{backgroundColor:y%2===0?"rgba(255,255,255,0.02)":"rgba(255,255,255,0.06)"},children:P},`${n.id||"row"}-${m}`)),S?e.jsx("td",{className:"text-end",style:{backgroundColor:y%2===0?"rgba(255,255,255,0.02)":"rgba(255,255,255,0.06)"},children:S(n)}):null]},n.id||n.key||JSON.stringify(n)))})]})}),e.jsxs("div",{className:"table-footer mt-2",children:[e.jsxs("div",{className:"table-info",children:["Showing ",M," to ",Y," of ",r," entries"]}),e.jsx(bt,{page:f,totalPages:b,onPageChange:I,showPageLinks:!0,showPageLabel:!1,maxPageLinks:5})]})]})}function Rt(){const l=["leads","contacts","deals","followUps","meetings","activities"],[h,o]=p.useState(vt),[N,L]=p.useState(l[0]),[S,R]=p.useState(()=>{const n=new Date;return new Date(n.getFullYear(),n.getMonth(),1)}),[T,x]=p.useState(null),[$,w]=p.useState(()=>Object.fromEntries(Object.entries(X).map(([n,y])=>[n,W(y.fields)]))),[O,E]=p.useState(()=>Object.fromEntries(Object.keys(X).map(n=>[n,""])));p.useEffect(()=>{try{const n=window.localStorage.getItem(Le);if(!n)return;const y=JSON.parse(n);Mt(y)&&o(y)}catch{}},[]),p.useEffect(()=>{window.localStorage.setItem(Le,JSON.stringify(h))},[h]),p.useEffect(()=>{N!=="meetings"&&x(null)},[N]);const A=p.useMemo(()=>{const n=h.leads||[],y=h.deals||[],P=h.followUps||[],m=n.filter(k=>!["closed","converted"].includes(String(k.status||"").toLowerCase())).length,j=y.filter(k=>!["won","lost","closed"].includes(String(k.status||"").toLowerCase())).reduce((k,U)=>k+J(U.amount),0),i=new Date().toISOString().slice(0,10),g=P.filter(k=>String(k.dueDate||"")===i&&String(k.status||"").toLowerCase()!=="done").length;return[{label:"Open Leads",value:String(m),icon:"bi-person-plus"},{label:"Pipeline Value",value:`INR ${j.toLocaleString("en-IN")}`,icon:"bi-graph-up-arrow"},{label:"Follow-ups Today",value:String(g),icon:"bi-telephone-forward"}]},[h]);function I(n,y,P){w(m=>({...m,[n]:{...m[n],[y]:P}}))}function B(n){E(y=>({...y,[n]:""})),w(y=>({...y,[n]:W(X[n].fields)}))}function r(n,y){E(m=>({...m,[n]:y.id}));const P={};X[n].fields.forEach(m=>{P[m.key]=y[m.key]??m.defaultValue??""}),w(m=>({...m,[n]:P}))}function b(n,y){o(P=>({...P,[n]:(P[n]||[]).filter(m=>m.id!==y)})),O[n]===y&&B(n)}function f(n,y){y.preventDefault();const P=X[n],m=$[n]||{};if(P.fields.some(k=>!String(m[k.key]||"").trim()))return;const i={};P.fields.forEach(k=>{i[k.key]=String(m[k.key]||"").trim()}),n==="meetings"&&(i.reminderSummary=`${i.reminderChannel} • ${i.reminderMinutes} min before`);const g=O[n];o(k=>{const U=k[n]||[];return g?{...k,[n]:U.map(F=>F.id===g?{...F,...i}:F)}:{...k,[n]:[{id:`${n}_${Date.now()}`,...i},...U]}}),B(n)}const v=p.useMemo(()=>{const n=h.meetings||[],y=new Date(S.getFullYear(),S.getMonth(),1),P=new Date(S.getFullYear(),S.getMonth()+1,0),m=(y.getDay()+6)%7,j=new Date(y);j.setDate(y.getDate()-m);const i=[];for(let g=0;g<42;g+=1){const k=new Date(j);k.setDate(j.getDate()+g);const U=k.toISOString().slice(0,10);i.push({isoDate:U,day:k.getDate(),inMonth:k>=y&&k<=P,meetings:n.filter(F=>String(F.meetingDate||"")===U).sort((F,z)=>String(F.meetingTime||"").localeCompare(String(z.meetingTime||"")))})}return{monthLabel:y.toLocaleString("en-US",{month:"long",year:"numeric"}),cells:i}},[S,h.meetings]);function _(n){R(y=>new Date(y.getFullYear(),y.getMonth()+n,1))}function M(n){x(n)}function Y(){x(null)}return e.jsxs("div",{className:"d-flex flex-column gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"CRM"}),e.jsx("p",{className:"text-secondary mb-3",children:"Manage leads, contacts, deals, follow-ups, and activity timeline in one page."}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:l.map(n=>{const y=X[n],P=Array.isArray(h[n])?h[n].length:0;return e.jsxs("button",{type:"button",className:`btn btn-sm ${N===n?"btn-success":"btn-outline-light"}`,onClick:()=>L(n),children:[y.label," (",P,")"]},`crm-tab-${n}`)})})]}),e.jsx("div",{className:"row g-3",children:A.map(n=>e.jsx("div",{className:"col-12 col-md-4",children:e.jsxs("div",{className:"card p-3 h-100 d-flex flex-column align-items-center justify-content-center text-center",children:[e.jsx("div",{className:"stat-icon stat-icon-primary mb-2",children:e.jsx("i",{className:`bi ${n.icon}`,"aria-hidden":"true"})}),e.jsx("div",{className:"text-secondary small",children:n.label}),e.jsx("h5",{className:"mb-0 mt-1",children:n.value})]})},n.label))}),l.filter(n=>n===N).map(n=>{const y=X[n],P=h[n]||[],m=$[n]||{},j=O[n]||"";return e.jsxs("div",{className:"d-flex flex-column gap-3",children:[e.jsxs("div",{className:"card p-3",children:[e.jsx("h6",{className:"mb-3",children:j?`Edit ${y.itemLabel}`:`Create ${y.itemLabel}`}),e.jsxs("form",{className:"d-flex flex-column gap-3",onSubmit:i=>f(n,i),children:[e.jsx("div",{className:"row g-3",children:y.fields.map(i=>e.jsxs("div",{className:"col-12 col-md-6 col-xl-4",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:i.label}),i.type==="select"?e.jsxs("select",{className:"form-select",value:m[i.key]||i.defaultValue||"",onChange:g=>I(n,i.key,g.target.value),children:[e.jsxs("option",{value:"",children:["Select ",i.label]}),(i.options||[]).map(g=>e.jsx("option",{value:g,children:g},g))]}):i.type==="date"||i.type==="time"?e.jsx("input",{type:i.type,className:"form-control",value:m[i.key]||"",onChange:g=>I(n,i.key,g.target.value)}):e.jsx("input",{type:"text",className:"form-control",placeholder:i.placeholder,value:m[i.key]||"",onChange:g=>I(n,i.key,g.target.value)})]},`${n}-${i.key}`))}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",children:j?"Update":"Create"}),j?e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:()=>B(n),children:"Cancel"}):null]})]})]}),n==="meetings"?e.jsxs("div",{className:"card p-3",children:[e.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"mb-1",children:"Meeting Schedule Calendar"}),e.jsx("div",{className:"small text-secondary",children:"Click a meeting label to view reminder and schedule details."})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-light",onClick:()=>_(-1),children:e.jsx("i",{className:"bi bi-chevron-left","aria-hidden":"true"})}),e.jsx("div",{className:"small fw-semibold px-2",children:v.monthLabel}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-light",onClick:()=>_(1),children:e.jsx("i",{className:"bi bi-chevron-right","aria-hidden":"true"})})]})]}),e.jsxs("div",{className:"mb-2",style:{display:"grid",gridTemplateColumns:"repeat(7, minmax(0, 1fr))",gap:"8px"},children:[["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(i=>e.jsx("div",{className:"small text-secondary text-center fw-semibold py-1",children:i},i)),v.cells.map(i=>e.jsxs("div",{style:{minHeight:"106px",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"10px",padding:"8px",backgroundColor:i.inMonth?"rgba(255,255,255,0.02)":"rgba(255,255,255,0.01)",opacity:i.inMonth?1:.55},children:[e.jsx("div",{className:"small fw-semibold mb-1",children:i.day}),e.jsxs("div",{className:"d-flex flex-column gap-1",children:[i.meetings.slice(0,3).map(g=>e.jsxs("button",{type:"button",className:"btn btn-success btn-sm text-start",style:{fontSize:"0.7rem",lineHeight:1.2,padding:"3px 6px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:`${g.meetingTime||""} ${g.title||""}`,onClick:()=>M(g),children:[(g.meetingTime||"--:--").slice(0,5)," ",g.title||"Meeting"]},g.id)),i.meetings.length>3?e.jsxs("div",{className:"small text-secondary",children:["+",i.meetings.length-3," more"]}):null]})]},i.isoDate))]})]}):null,e.jsx(Q,{title:`${y.label} List`,badgeLabel:`${P.length} items`,rows:P,columns:y.columns,withoutOuterCard:!0,searchPlaceholder:`Search ${y.label.toLowerCase()}`,noRowsText:`No ${y.label.toLowerCase()} yet.`,searchBy:i=>y.columns.map(g=>i[g.key]||"").join(" "),renderCells:i=>y.columns.map(g=>{if(n==="contacts"&&g.key==="phone"){const k=String(i.phone||"").trim();return k?`${String(i.phoneCountryCode||"+91").trim()} ${k}`:"-"}return i[g.key]||"-"}),renderActions:i=>e.jsxs("div",{className:"d-inline-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:()=>r(n,i),children:"Edit"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>b(n,i.id),children:"Delete"})]})})]},n)}),T?e.jsx("div",{role:"dialog","aria-modal":"true",className:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:"rgba(0,0,0,0.65)",zIndex:1050,padding:"1rem"},onClick:Y,children:e.jsxs("div",{className:"card p-3",style:{width:"min(560px, 100%)"},onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"d-flex align-items-start justify-content-between gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-1",children:T.title||"Meeting"}),e.jsx("div",{className:"small text-secondary",children:T.relatedTo||"-"})]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-light",onClick:Y,children:e.jsx("i",{className:"bi bi-x-lg","aria-hidden":"true"})})]}),e.jsxs("div",{className:"row g-3 small",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"text-secondary",children:"Date"}),e.jsx("div",{className:"fw-semibold",children:T.meetingDate||"-"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"text-secondary",children:"Time"}),e.jsx("div",{className:"fw-semibold",children:T.meetingTime||"-"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"text-secondary",children:"Owner"}),e.jsx("div",{className:"fw-semibold",children:T.owner||"-"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"text-secondary",children:"Meeting Mode"}),e.jsx("div",{className:"fw-semibold",children:T.meetingMode||"-"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"text-secondary",children:"Reminder"}),e.jsx("div",{className:"fw-semibold",children:T.reminderSummary||`${T.reminderChannel||"-"} • ${T.reminderMinutes||"-"} min before`})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"text-secondary",children:"Status"}),e.jsx("div",{className:"fw-semibold",children:T.status||"-"})]})]})]})}):null]})}function Ot(){const[l,h]=p.useState("projects"),[o,N]=p.useState(St),[L,S]=p.useState(W(le.projects.fields)),[R,T]=p.useState("");p.useEffect(()=>{try{const r=window.localStorage.getItem(Me);if(!r)return;const b=JSON.parse(r);Pt(b)&&N(b)}catch{}},[]),p.useEffect(()=>{window.localStorage.setItem(Me,JSON.stringify(o))},[o]),p.useEffect(()=>{T(""),S(W(le[l].fields))},[l]);const x=le[l],$=o[l]||[],w=p.useMemo(()=>{const r=(o.projects||[]).filter(v=>v.status.toLowerCase()==="active").length,b=(o.tasks||[]).length,f=(o.tasks||[]).filter(v=>{const _=Date.parse(v.dueDate);return Number.isFinite(_)&&_<Date.now()}).length;return[{label:"Active Projects",value:String(r),icon:"bi-diagram-3"},{label:"Tasks",value:String(b),icon:"bi-list-check"},{label:"Overdue Tasks",value:String(f),icon:"bi-exclamation-triangle"}]},[o]);function O(r,b){S(f=>({...f,[r]:b}))}function E(r){T(r.id);const b={};x.fields.forEach(f=>{b[f.key]=r[f.key]||""}),S(b)}function A(){T(""),S(W(x.fields))}function I(r){N(b=>({...b,[l]:(b[l]||[]).filter(f=>f.id!==r)})),R===r&&A()}function B(r){if(r.preventDefault(),x.fields.some(v=>!String(L[v.key]||"").trim()))return;const f={};x.fields.forEach(v=>{f[v.key]=String(L[v.key]).trim()}),N(v=>{const _=v[l]||[];return R?{...v,[l]:_.map(M=>M.id===R?{...M,...f}:M)}:{...v,[l]:[{id:`${l}_${Date.now()}`,...f},..._]}}),A()}return e.jsxs("div",{className:"d-flex flex-column gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Project Management"}),e.jsx("p",{className:"text-secondary mb-3",children:"Track project milestones, tasks, and team delivery."}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Object.entries(le).map(([r,b])=>e.jsx("button",{type:"button",className:`btn btn-sm ${l===r?"btn-success":"btn-outline-light"}`,onClick:()=>h(r),children:b.label},r))})]}),e.jsx("div",{className:"row g-3",children:w.map(r=>e.jsx("div",{className:"col-12 col-md-4",children:e.jsxs("div",{className:"card p-3 h-100 d-flex flex-column align-items-center justify-content-center text-center",children:[e.jsx("div",{className:"stat-icon stat-icon-primary mb-2",children:e.jsx("i",{className:`bi ${r.icon||"bi-grid"}`,"aria-hidden":"true"})}),e.jsx("div",{className:"text-secondary small",children:r.label}),e.jsx("h5",{className:"mb-0 mt-1",children:r.value})]})},r.label))}),e.jsx(Q,{title:x.label,badgeLabel:`${$.length} items`,rows:$,columns:x.columns,withoutOuterCard:l==="projects",searchPlaceholder:`Search ${x.label.toLowerCase()}`,noRowsText:`No ${x.label.toLowerCase()} yet.`,searchBy:r=>x.columns.map(b=>r[b.key]||"").join(" "),renderCells:r=>x.columns.map(b=>r[b.key]||"-"),renderActions:r=>e.jsxs("div",{className:"d-inline-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:()=>E(r),children:"Edit"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>I(r.id),children:"Delete"})]})}),e.jsxs("div",{className:"card p-3",children:[e.jsx("h6",{className:"mb-3",children:R?`Edit ${x.itemLabel}`:`Create ${x.itemLabel}`}),e.jsxs("form",{className:"d-flex flex-column gap-3",onSubmit:B,children:[e.jsx("div",{className:"row g-3",children:x.fields.map(r=>e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:r.label}),e.jsx("input",{type:"text",className:"form-control",placeholder:r.placeholder,value:L[r.key]||"",onChange:b=>O(r.key,b.target.value)})]},r.key))}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",children:R?"Update":"Create"}),R?e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:A,children:"Cancel"}):null]})]})]})]})}function _t(){const[l,h]=p.useState("employees"),[o,N]=p.useState(kt),[L,S]=p.useState(W(ne.employees.fields)),[R,T]=p.useState("");p.useEffect(()=>{try{const r=window.localStorage.getItem(Re);if(!r)return;const b=JSON.parse(r);It(b)&&N(b)}catch{}},[]),p.useEffect(()=>{window.localStorage.setItem(Re,JSON.stringify(o))},[o]),p.useEffect(()=>{T(""),S(W(ne[l].fields))},[l]);const x=ne[l],$=o[l]||[],w=p.useMemo(()=>{const r=(o.employees||[]).length,b=(o.attendance||[]).filter(v=>String(v.status||"").toLowerCase().includes("present")).length,f=(o.leaves||[]).filter(v=>String(v.status||"").toLowerCase()==="pending").length;return[{label:"Employees",value:String(r),icon:"bi-people"},{label:"Attendance Today",value:String(b),icon:"bi-calendar-check"},{label:"Pending Leaves",value:String(f),icon:"bi-hourglass-split"}]},[o]);function O(r,b){S(f=>({...f,[r]:b}))}function E(r){T(r.id);const b={};x.fields.forEach(f=>{b[f.key]=r[f.key]||""}),S(b)}function A(){T(""),S(W(x.fields))}function I(r){N(b=>({...b,[l]:(b[l]||[]).filter(f=>f.id!==r)})),R===r&&A()}function B(r){if(r.preventDefault(),x.fields.some(v=>!String(L[v.key]||"").trim()))return;const f={};x.fields.forEach(v=>{f[v.key]=String(L[v.key]).trim()}),N(v=>{const _=v[l]||[];return R?{...v,[l]:_.map(M=>M.id===R?{...M,...f}:M)}:{...v,[l]:[{id:`${l}_${Date.now()}`,...f},..._]}}),A()}return e.jsxs("div",{className:"d-flex flex-column gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"HR"}),e.jsx("p",{className:"text-secondary mb-3",children:"Handle employees, attendance, leave approvals, and payroll."}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Object.entries(ne).map(([r,b])=>e.jsx("button",{type:"button",className:`btn btn-sm ${l===r?"btn-success":"btn-outline-light"}`,onClick:()=>h(r),children:b.label},r))})]}),e.jsx("div",{className:"row g-3",children:w.map(r=>e.jsx("div",{className:"col-12 col-md-4",children:e.jsxs("div",{className:"card p-3 h-100 d-flex flex-column align-items-center justify-content-center text-center",children:[e.jsx("div",{className:"stat-icon stat-icon-primary mb-2",children:e.jsx("i",{className:`bi ${r.icon||"bi-bar-chart"}`,"aria-hidden":"true"})}),e.jsx("div",{className:"text-secondary small",children:r.label}),e.jsx("h5",{className:"mb-0 mt-1",children:r.value})]})},r.label))}),e.jsxs("div",{className:"card p-3",children:[e.jsx("h6",{className:"mb-3",children:R?`Edit ${x.itemLabel}`:`Create ${x.itemLabel}`}),e.jsxs("form",{className:"d-flex flex-column gap-3",onSubmit:B,children:[e.jsx("div",{className:"row g-3",children:x.fields.map(r=>e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:r.label}),e.jsx("input",{type:"text",className:"form-control",placeholder:r.placeholder,value:L[r.key]||"",onChange:b=>O(r.key,b.target.value)})]},r.key))}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",children:R?"Update":"Create"}),R?e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:A,children:"Cancel"}):null]})]})]}),e.jsx(Q,{title:x.label,badgeLabel:`${$.length} items`,rows:$,columns:x.columns,searchPlaceholder:`Search ${x.label.toLowerCase()}`,noRowsText:`No ${x.label.toLowerCase()} yet.`,searchBy:r=>x.columns.map(b=>r[b.key]||"").join(" "),renderCells:r=>x.columns.map(b=>r[b.key]||"-"),renderActions:r=>e.jsxs("div",{className:"d-inline-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:()=>E(r),children:"Edit"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>I(r.id),children:"Delete"})]})})]})}function Ge({heading:l,subtitle:h,tabConfig:o,defaultData:N,storageKey:L,statsBuilder:S,statIcons:R=[]}){const T=Object.keys(o)[0],[x,$]=p.useState(T),[w,O]=p.useState(N),[E,A]=p.useState(W(o[T].fields)),[I,B]=p.useState(""),[r,b]=p.useState([]);p.useEffect(()=>{try{const m=window.localStorage.getItem(L);if(!m)return;const j=JSON.parse(m);Lt(j,o)&&O(j)}catch{}},[L,o]),p.useEffect(()=>{window.localStorage.setItem(L,JSON.stringify(w))},[w,L]),p.useEffect(()=>{let m=!0;return Object.values(o).some(i=>Array.isArray(i==null?void 0:i.fields)&&i.fields.some(g=>g.key==="department"))?((async()=>{try{const i=await ue("/api/business-autopilot/departments");if(!m)return;const k=(Array.isArray(i==null?void 0:i.departments)?i.departments:[]).map(U=>String((U==null?void 0:U.name)||"").trim()).filter(Boolean);b(Array.from(new Set(k)))}catch{m&&b([])}})(),()=>{m=!1}):()=>{m=!1}},[o]),p.useEffect(()=>{B(""),A(W(o[x].fields))},[x,o]);const f=o[x],v=w[x]||[],_=p.useMemo(()=>S(w),[w,S]);function M(m,j){A(i=>({...i,[m]:j}))}function Y(m){B(m.id);const j={};f.fields.forEach(i=>{j[i.key]=m[i.key]||""}),A(j)}function n(){B(""),A(W(f.fields))}function y(m){O(j=>({...j,[x]:(j[x]||[]).filter(i=>i.id!==m)})),I===m&&n()}function P(m){if(m.preventDefault(),f.fields.some(g=>!String(E[g.key]||"").trim()))return;const i={};f.fields.forEach(g=>{i[g.key]=String(E[g.key]).trim()}),O(g=>{const k=g[x]||[];return I?{...g,[x]:k.map(U=>U.id===I?{...U,...i}:U)}:{...g,[x]:[{id:`${x}_${Date.now()}`,...i},...k]}}),n()}return e.jsxs("div",{className:"d-flex flex-column gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:l}),e.jsx("p",{className:"text-secondary mb-3",children:h}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Object.entries(o).map(([m,j])=>e.jsx("button",{type:"button",className:`btn btn-sm ${x===m?"btn-success":"btn-outline-light"}`,onClick:()=>$(m),children:j.label},m))})]}),e.jsx("div",{className:"row g-3",children:_.map((m,j)=>e.jsx("div",{className:"col-12 col-md-4",children:e.jsxs("div",{className:"card p-3 h-100 d-flex flex-column align-items-center justify-content-center text-center",children:[e.jsx("div",{className:"stat-icon stat-icon-primary mb-2",children:e.jsx("i",{className:`bi ${R[j]||"bi-grid"}`,"aria-hidden":"true"})}),e.jsx("div",{className:"text-secondary small",children:m.label}),e.jsx("h5",{className:"mb-0 mt-1",children:m.value})]})},m.label))}),e.jsx(Q,{title:`${f.label} List`,badgeLabel:`${v.length} items`,rows:v,columns:f.columns,withoutOuterCard:x==="mainCategories"||x==="items",searchPlaceholder:`Search ${f.label.toLowerCase()}`,noRowsText:`No ${f.label.toLowerCase()} added yet.`,searchBy:m=>f.columns.map(j=>m[j.key]||"").join(" "),renderCells:m=>f.columns.map(j=>m[j.key]||"-"),renderActions:m=>e.jsxs("div",{className:"d-inline-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:()=>Y(m),children:"Edit"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>y(m.id),children:"Delete"})]})}),e.jsxs("div",{className:"card p-3",children:[e.jsx("h6",{className:"mb-3",children:I?`Edit ${f.itemLabel}`:`Create ${f.itemLabel}`}),e.jsxs("form",{className:"d-flex flex-column gap-3",onSubmit:P,children:[e.jsx("div",{className:"row g-3",children:f.fields.map(m=>e.jsxs("div",{className:"col-12 col-md-6 col-xl-3",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:m.label}),m.key==="department"&&r.length?e.jsxs("select",{className:"form-select",value:E[m.key]||"",onChange:j=>M(m.key,j.target.value),children:[e.jsx("option",{value:"",children:"Select Department"}),r.map(j=>e.jsx("option",{value:j,children:j},j)),E[m.key]&&!r.includes(E[m.key])?e.jsx("option",{value:E[m.key],children:E[m.key]}):null]}):e.jsx("input",{type:"text",className:"form-control",placeholder:m.placeholder,value:E[m.key]||"",onChange:j=>M(m.key,j.target.value)})]},m.key))}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",children:I?"Update":"Create"}),I?e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:n,children:"Cancel"}):null]})]})]})]})}function $t(){const l=p.useMemo(()=>h=>{const o=(h.tickets||[]).filter(S=>String(S.status||"").toLowerCase()!=="closed").length,N=(h.tickets||[]).filter(S=>String(S.status||"").toLowerCase().includes("progress")||String(S.status||"").toLowerCase()==="open").length,L=(h.mainCategories||[]).length+(h.subCategories||[]).length;return[{label:"Open Tickets",value:String(o)},{label:"Pending Today",value:String(N)},{label:"Categories",value:String(L)}]},[]);return e.jsx(Ge,{heading:"Ticketing System",subtitle:"Create main/sub categories and manage tickets with create, edit, and delete actions.",tabConfig:Ct,defaultData:Tt,storageKey:ft,statsBuilder:l,statIcons:["bi-life-preserver","bi-hourglass-split","bi-tags"]})}function wt(){const l=p.useMemo(()=>h=>{const o=(h.items||[]).length,N=(h.items||[]).filter(S=>Number(S.qty||0)>0&&Number(S.qty||0)<=5).length,L=(h.mainCategories||[]).length+(h.subCategories||[]).length;return[{label:"Stock Items",value:String(o)},{label:"Low Stock Alerts",value:String(N)},{label:"Categories",value:String(L)}]},[]);return e.jsx(Ge,{heading:"Stocks Management",subtitle:"Create main/sub categories and manage stock items with create, edit, and delete actions.",tabConfig:Dt,defaultData:Et,storageKey:Nt,statsBuilder:l,statIcons:["bi-box-seam","bi-exclamation-triangle","bi-diagram-3"]})}function Gt(){const[l,h]=p.useState("overview"),[o,N]=p.useState(At),[L,S]=p.useState(!0),[R,T]=p.useState("Loading..."),[x,$]=p.useState(""),w=p.useRef(!1),O=p.useRef(null),[E,A]=p.useState({id:"",name:"",taxScope:"Intra State",cgst:"",sgst:"",igst:"",cess:"",status:"Active",notes:""}),[I,B]=p.useState(""),[r,b]=p.useState({id:"",name:"",docType:"Invoice",gstTemplateId:"",prefix:"",themeColor:"#22c55e",footerNote:"",termsText:"",status:"Active"}),[f,v]=p.useState(""),[_,M]=p.useState(Z("estimate")),[Y,n]=p.useState(Z("invoice")),[y,P]=p.useState(""),[m,j]=p.useState(""),[i,g]=p.useState({id:"",companyName:"",clientName:"",name:"",gstin:"",phoneCountryCode:"+91",phone:"",additionalPhones:[],email:"",additionalEmails:[],billingAddress:"",shippingAddress:"",country:"India",state:"",city:"",pincode:""}),[k,U]=p.useState(""),[F,z]=p.useState({id:"",name:"",sku:"",unit:"Nos",defaultRate:"",taxPercent:""}),[te,je]=p.useState(""),[Fe,ve]=p.useState([]);p.useEffect(()=>{let t=!0;return(async()=>{S(!0),$("");try{const a=await ue("/api/business-autopilot/accounts/workspace");if(!t)return;const s=a==null?void 0:a.data;if(ye(s))N(s),window.localStorage.setItem(ce,JSON.stringify(s)),T("Synced from server");else try{const c=window.localStorage.getItem(ce);if(c){const d=JSON.parse(c);ye(d)&&(N(d),T("Loaded local cache"))}}catch{}}catch(a){if(!t)return;try{const s=window.localStorage.getItem(ce);if(s){const c=JSON.parse(s);ye(c)&&(N(c),T("Loaded local cache"))}}catch{}$((a==null?void 0:a.message)||"Unable to sync accounts workspace.")}finally{t&&(w.current=!0,S(!1))}})(),()=>{t=!1}},[]),p.useEffect(()=>{if(window.localStorage.setItem(ce,JSON.stringify(o)),!!w.current)return O.current&&window.clearTimeout(O.current),T("Saving..."),O.current=window.setTimeout(async()=>{try{await ue("/api/business-autopilot/accounts/workspace",{method:"PUT",body:JSON.stringify({data:o})}),$(""),T("Saved to server")}catch(t){$((t==null?void 0:t.message)||"Server save failed"),T("Save failed")}},450),()=>{O.current&&window.clearTimeout(O.current)}},[o]),p.useEffect(()=>{let t=!0;return(async()=>{try{const a=await ue("/api/business-autopilot/users");if(!t)return;ve(Array.isArray(a==null?void 0:a.users)?a.users:[])}catch{t&&ve([])}})(),()=>{t=!1}},[]);const Ue=p.useMemo(()=>(o.gstTemplates||[]).filter(t=>String(t.status||"").toLowerCase()==="active"),[o.gstTemplates]),Be=p.useMemo(()=>{const t=o.invoices||[],a=o.estimates||[],s=o.gstTemplates||[],c=t.filter(d=>!["paid","cancelled"].includes(String(d.status||"").toLowerCase())).reduce((d,D)=>d+de(D,s).grandTotal,0);return[{label:"Invoices",value:String(t.length),icon:"bi-receipt-cutoff"},{label:"Estimates",value:String(a.length),icon:"bi-file-earmark-text"},{label:"Receivables",value:ae(c),icon:"bi-cash-coin"},{label:"GST Templates",value:String(s.length),icon:"bi-file-earmark-ruled"}]},[o]),Se=o.customers||[],Ve=o.itemMasters||[],pe=yt(String(i.country||"India"));function He(t={}){const a=String(t.phone||"").trim(),s=String(t.email||"").trim(),c=Array.isArray(t.phoneList)?t.phoneList:[],d=Array.isArray(t.emailList)?t.emailList:[];return{id:t.id||"",companyName:t.companyName||t.name||"",clientName:t.clientName||"",name:t.name||t.companyName||t.clientName||"",gstin:t.gstin||"",phoneCountryCode:t.phoneCountryCode||"+91",phone:t.phone||"",additionalPhones:c.length?c.slice(1).map(D=>({countryCode:D.countryCode||"+91",number:D.number||""})):a?[]:[],email:t.email||"",additionalEmails:d.length?d.slice(1).map(D=>D||""):s?[]:[],billingAddress:t.billingAddress||"",shippingAddress:t.shippingAddress||"",country:t.country||"India",state:t.state||"",city:t.city||"",pincode:t.pincode||""}}function ke(t={}){const a=[];return String(t.phone||"").trim()&&a.push(`${t.phoneCountryCode||"+91"} ${t.phone}`.trim()),Array.isArray(t.phoneList)&&t.phoneList.forEach((s,c)=>{c!==0&&String((s==null?void 0:s.number)||"").trim()&&a.push(`${s.countryCode||"+91"} ${s.number}`.trim())}),!a.length&&Array.isArray(t.additionalPhones)&&t.additionalPhones.forEach(s=>{String((s==null?void 0:s.number)||"").trim()&&a.push(`${s.countryCode||"+91"} ${s.number}`.trim())}),a.filter(Boolean)}function Ce(t={}){const a=[];return String(t.email||"").trim()&&a.push(String(t.email).trim()),Array.isArray(t.emailList)&&t.emailList.forEach((s,c)=>{c!==0&&String(s||"").trim()&&a.push(String(s).trim())}),!a.length&&Array.isArray(t.additionalEmails)&&t.additionalEmails.forEach(s=>{String(s||"").trim()&&a.push(String(s).trim())}),a.filter(Boolean)}function he(){B(""),A({id:"",name:"",taxScope:"Intra State",cgst:"",sgst:"",igst:"",cess:"",status:"Active",notes:""})}function be(){var t;v(""),b({id:"",name:"",docType:"Invoice",gstTemplateId:((t=Ue[0])==null?void 0:t.id)||"",prefix:"",themeColor:"#22c55e",footerNote:"",termsText:"",status:"Active"})}function Ye(t){if(t.preventDefault(),!E.name.trim())return;const a={...E,name:E.name.trim(),notes:E.notes.trim()};N(s=>{const c=s.gstTemplates||[];return I?{...s,gstTemplates:c.map(d=>d.id===I?{...d,...a}:d)}:{...s,gstTemplates:[{...a,id:`gst_${Date.now()}`},...c]}}),he()}function Je(t){B(t.id),A({...t}),h("gst")}function We(t){N(a=>({...a,gstTemplates:(a.gstTemplates||[]).filter(s=>s.id!==t),billingTemplates:(a.billingTemplates||[]).map(s=>s.gstTemplateId===t?{...s,gstTemplateId:""}:s),estimates:(a.estimates||[]).map(s=>s.gstTemplateId===t?{...s,gstTemplateId:""}:s),invoices:(a.invoices||[]).map(s=>s.gstTemplateId===t?{...s,gstTemplateId:""}:s)})),I===t&&he()}function qe(t,a){N(s=>({...s,gstTemplates:(s.gstTemplates||[]).map(c=>c.id===t?{...c,status:a}:c)}))}function ze(t){if(t.preventDefault(),!r.name.trim())return;const a={...r,name:r.name.trim(),footerNote:r.footerNote.trim(),termsText:r.termsText.trim()};N(s=>{const c=s.billingTemplates||[];return f?{...s,billingTemplates:c.map(d=>d.id===f?{...d,...a}:d)}:{...s,billingTemplates:[{...a,id:`bt_${Date.now()}`},...c]}}),be()}function Qe(t){v(t.id),b({...t}),h("templates")}function Ze(t){N(a=>({...a,billingTemplates:(a.billingTemplates||[]).filter(s=>s.id!==t),estimates:(a.estimates||[]).map(s=>s.billingTemplateId===t?{...s,billingTemplateId:""}:s),invoices:(a.invoices||[]).map(s=>s.billingTemplateId===t?{...s,billingTemplateId:""}:s)})),f===t&&be()}function Xe(t,a){N(s=>({...s,billingTemplates:(s.billingTemplates||[]).map(c=>c.id===t?{...c,status:a}:c)}))}function ge(){U(""),g({id:"",companyName:"",clientName:"",name:"",gstin:"",phoneCountryCode:"+91",phone:"",additionalPhones:[],email:"",additionalEmails:[],billingAddress:"",shippingAddress:"",country:"India",state:"",city:"",pincode:""})}function Ke(t){t.preventDefault();const a=String(i.companyName||i.name||"").trim();if(!a)return;const s=String(i.clientName||"").trim(),c=String(i.phone||"").trim(),d=String(i.email||"").trim(),D=(i.additionalPhones||[]).map(V=>({countryCode:String(V.countryCode||"+91").trim()||"+91",number:String(V.number||"").trim()})).filter(V=>V.number),C=(i.additionalEmails||[]).map(V=>String(V||"").trim()).filter(Boolean),H={...i,companyName:a,clientName:s,name:a,gstin:String(i.gstin||"").trim(),phoneCountryCode:String(i.phoneCountryCode||"+91").trim()||"+91",phone:c,email:d,additionalPhones:D,additionalEmails:C,phoneList:[...c?[{countryCode:String(i.phoneCountryCode||"+91").trim()||"+91",number:c}]:[],...D],emailList:[d,...C].filter(Boolean),billingAddress:String(i.billingAddress||"").trim(),shippingAddress:String(i.shippingAddress||"").trim(),country:String(i.country||"").trim(),state:String(i.state||"").trim(),city:String(i.city||"").trim(),pincode:String(i.pincode||"").trim()};N(V=>{const re=V.customers||[];return k?{...V,customers:re.map(se=>se.id===k?{...se,...H}:se)}:{...V,customers:[{...H,id:`cust_${Date.now()}`},...re]}}),ge()}function et(t){U(t.id),g(He(t)),h("customers")}function tt(t){N(a=>({...a,customers:(a.customers||[]).filter(s=>s.id!==t)})),k===t&&ge()}function xe(){je(""),z({id:"",name:"",sku:"",unit:"Nos",defaultRate:"",taxPercent:""})}function at(t){if(t.preventDefault(),!String(F.name||"").trim())return;const a={...F,name:String(F.name||"").trim(),sku:String(F.sku||"").trim(),unit:String(F.unit||"").trim(),defaultRate:String(F.defaultRate||"").trim(),taxPercent:String(F.taxPercent||"").trim()};N(s=>{const c=s.itemMasters||[];return te?{...s,itemMasters:c.map(d=>d.id===te?{...d,...a}:d)}:{...s,itemMasters:[{...a,id:`itm_${Date.now()}`},...c]}}),xe()}function st(t){je(t.id),z({...t}),h("items")}function lt(t){N(a=>({...a,itemMasters:(a.itemMasters||[]).filter(s=>s.id!==t)})),te===t&&xe()}function nt(t,a){const s=(o.customers||[]).find(d=>d.id===a);if(!s)return;(t==="estimate"?M:n)(d=>({...d,customerName:s.companyName||s.name||s.clientName||"",customerGstin:s.gstin||"",billingAddress:s.billingAddress||""}))}function it(t,a,s){const c=(o.itemMasters||[]).find(D=>D.id===s);if(!c)return;(t==="estimate"?M:n)(D=>({...D,items:(D.items||[]).map(C=>C.id===a?{...C,itemMasterId:c.id,description:c.name||C.description,rate:String(c.defaultRate||C.rate||""),taxPercent:String(c.taxPercent||C.taxPercent||"")}:C)}))}function ot(t,a){const s=`/api/business-autopilot/accounts/documents/${t}/${encodeURIComponent(a)}/print`;window.open(s,"_blank","noopener,noreferrer")}function Te(t,a,s){if(t==="estimate"){M(c=>({...c,[a]:s}));return}n(c=>({...c,[a]:s}))}function rt(t){if(t==="estimate"){M(a=>({...a,items:[...a.items||[],ee()]}));return}n(a=>({...a,items:[...a.items||[],ee()]}))}function ie(t,a,s,c){(t==="estimate"?M:n)(D=>({...D,items:(D.items||[]).map(C=>C.id===a?{...C,[s]:c}:C)}))}function ct(t,a){(t==="estimate"?M:n)(c=>{const d=(c.items||[]).filter(D=>D.id!==a);return{...c,items:d.length?d:[ee()]}})}function De(t,a){a.preventDefault();const s=t==="estimate"?_:Y;if(!String(s.customerName||"").trim())return;const c={...s,customerName:String(s.customerName||"").trim(),customerGstin:String(s.customerGstin||"").trim(),billingAddress:String(s.billingAddress||"").trim(),salesperson:String(s.salesperson||"").trim(),notes:String(s.notes||"").trim(),termsText:String(s.termsText||"").trim(),items:(s.items||[]).map(C=>({...C,itemMasterId:C.itemMasterId||"",description:String(C.description||"").trim(),qty:String(C.qty||"").trim(),rate:String(C.rate||"").trim(),taxPercent:String(C.taxPercent||"").trim()})).filter(C=>C.description||C.qty||C.rate)};c.items.length||(c.items=[ee()]);const d=t==="estimate"?"estimates":"invoices",D=t==="estimate"?y:m;N(C=>{const H=C[d]||[];return D?{...C,[d]:H.map(V=>V.id===D?{...V,...c}:V)}:{...C,[d]:[{...c,id:`${t}_${Date.now()}`},...H]}}),t==="estimate"?(P(""),M(Z("estimate"))):(j(""),n(Z("invoice")))}function mt(t,a){const s={...a,items:(a.items&&a.items.length?a.items:[ee()]).map(c=>({id:c.id||ee().id,itemMasterId:c.itemMasterId||"",description:c.description||"",qty:String(c.qty??""),rate:String(c.rate??""),taxPercent:String(c.taxPercent??"")}))};if(t==="estimate"){P(a.id),M(s),h("estimates");return}j(a.id),n(s),h("invoices")}function dt(t,a){const s=t==="estimate"?"estimates":"invoices";N(c=>({...c,[s]:(c[s]||[]).filter(d=>d.id!==a)})),t==="estimate"&&y===a&&(P(""),M(Z("estimate"))),t==="invoice"&&m===a&&(j(""),n(Z("invoice")))}function ut(t,a,s){const c=t==="estimate"?"estimates":"invoices";N(d=>({...d,[c]:(d[c]||[]).map(D=>D.id===a?{...D,status:s}:D)}))}function Ee(t){var a;return((a=(o.gstTemplates||[]).find(s=>s.id===t))==null?void 0:a.name)||"-"}const pt=p.useMemo(()=>de(_,o.gstTemplates||[]),[_,o.gstTemplates]),ht=p.useMemo(()=>de(Y,o.gstTemplates||[]),[Y,o.gstTemplates]);function Ae({kind:t,form:a,setField:s,totals:c,onSave:d,onCancelEdit:D,editingId:C}){var Pe;const H=t==="estimate"?"Estimate":"Invoice",V=(o.billingTemplates||[]).filter(u=>String(u.docType||"").toLowerCase()===H.toLowerCase()),re=((Pe=(o.customers||[]).find(u=>(u.companyName||u.name)===a.customerName))==null?void 0:Pe.id)||"",se=(Fe||[]).filter(u=>!!(u!=null&&u.name)).map(u=>u.name);return e.jsxs("div",{children:[e.jsx("div",{className:"d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3",children:e.jsx("h6",{className:"mb-0",children:C?`Edit ${H}`:`Create ${H}`})}),e.jsxs("form",{className:"d-flex flex-column gap-3",onSubmit:d,children:[e.jsx("div",{className:"border rounded p-3",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-xl-6",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Client / Company Name"}),e.jsxs("select",{className:"form-select mb-2",value:re,onChange:u=>nt(t,u.target.value),children:[e.jsx("option",{value:"",children:"Select Client / Company"}),Se.map(u=>e.jsxs("option",{value:u.id,children:[u.companyName||u.name,u.clientName?` (${u.clientName})`:""]},u.id))]}),e.jsx("input",{className:"form-control",list:`${t}-client-company-list`,value:a.customerName||"",onChange:u=>{const q=u.target.value;s("customerName",q);const K=(o.customers||[]).find(G=>`${G.companyName||G.name||""}${G.clientName?` (${G.clientName})`:""}`===q||(G.companyName||G.name||"")===q);K&&(s("customerName",K.companyName||K.name||""),s("customerGstin",K.gstin||""),s("billingAddress",K.billingAddress||""))},placeholder:"Search client / company"}),e.jsx("datalist",{id:`${t}-client-company-list`,children:Se.map(u=>e.jsx("option",{value:`${u.companyName||u.name||""}${u.clientName?` (${u.clientName})`:""}`},`${t}-${u.id}`))})]}),e.jsxs("div",{className:"col-12 col-xl-3",children:[e.jsxs("label",{className:"form-label small text-secondary mb-1",children:[H," No"]}),e.jsx("input",{className:"form-control",value:a.docNo||"",onChange:u=>s("docNo",u.target.value),placeholder:t==="estimate"?"EST-1001":"INV-1001"})]}),e.jsxs("div",{className:"col-12 col-xl-3",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Sales Person"}),e.jsxs("select",{className:"form-select",value:a.salesperson||"",onChange:u=>s("salesperson",u.target.value),children:[e.jsx("option",{value:"",children:"Select Sales Person"}),se.map(u=>e.jsx("option",{value:u,children:u},`${t}-sales-${u}`))]})]}),e.jsxs("div",{className:"col-12 col-md-6 col-xl-3",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Issue Date"}),e.jsx("input",{type:"date",className:"form-control",value:a.issueDate||"",onChange:u=>s("issueDate",u.target.value)})]}),e.jsxs("div",{className:"col-12 col-md-6 col-xl-3",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Due Date"}),e.jsx("input",{type:"date",className:"form-control",value:a.dueDate||"",onChange:u=>s("dueDate",u.target.value)})]}),e.jsxs("div",{className:"col-12 col-md-6 col-xl-3",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"GST Template"}),e.jsxs("select",{className:"form-select",value:a.gstTemplateId||"",onChange:u=>s("gstTemplateId",u.target.value),children:[e.jsx("option",{value:"",children:"Select GST Template"}),(o.gstTemplates||[]).map(u=>e.jsxs("option",{value:u.id,children:[u.name," (",Ne(u),"%)"]},u.id))]})]}),e.jsxs("div",{className:"col-12 col-md-6 col-xl-3",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Billing Template"}),e.jsxs("select",{className:"form-select",value:a.billingTemplateId||"",onChange:u=>s("billingTemplateId",u.target.value),children:[e.jsx("option",{value:"",children:"Select Billing Template"}),V.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]})]})]})}),e.jsxs("div",{className:"card p-3 border",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("h6",{className:"mb-0",children:"Item Table"}),e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:()=>rt(t),children:"Add Row"})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-dark table-borderless align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{minWidth:220},children:"Item Details"}),e.jsx("th",{style:{width:110},children:"Qty"}),e.jsx("th",{style:{width:140},children:"Rate"}),e.jsx("th",{style:{width:130},children:"Tax %"}),e.jsx("th",{style:{width:160},children:"Amount"}),e.jsx("th",{className:"text-end",style:{width:100},children:"Action"})]})}),e.jsx("tbody",{children:(a.items||[]).map((u,q)=>{const K=J(u.qty)*J(u.rate);return e.jsxs("tr",{children:[e.jsxs("td",{style:{backgroundColor:q%2===0?"rgba(255,255,255,0.02)":"rgba(255,255,255,0.06)"},children:[e.jsxs("select",{className:"form-select mb-2",value:u.itemMasterId||"",onChange:G=>it(t,u.id,G.target.value),children:[e.jsx("option",{value:"",children:"Select Item Master"}),Ve.map(G=>e.jsxs("option",{value:G.id,children:[G.name," (",G.sku||"-",")"]},G.id))]}),e.jsx("input",{className:"form-control",value:u.description||"",onChange:G=>ie(t,u.id,"description",G.target.value),placeholder:"Type or click to select an item"})]}),e.jsx("td",{style:{backgroundColor:q%2===0?"rgba(255,255,255,0.02)":"rgba(255,255,255,0.06)"},children:e.jsx("input",{className:"form-control",value:u.qty||"",onChange:G=>ie(t,u.id,"qty",G.target.value),placeholder:"1"})}),e.jsx("td",{style:{backgroundColor:q%2===0?"rgba(255,255,255,0.02)":"rgba(255,255,255,0.06)"},children:e.jsx("input",{className:"form-control",value:u.rate||"",onChange:G=>ie(t,u.id,"rate",G.target.value),placeholder:"0.00"})}),e.jsx("td",{style:{backgroundColor:q%2===0?"rgba(255,255,255,0.02)":"rgba(255,255,255,0.06)"},children:e.jsx("input",{className:"form-control",value:u.taxPercent||"",onChange:G=>ie(t,u.id,"taxPercent",G.target.value),placeholder:"Auto"})}),e.jsx("td",{className:"fw-semibold",style:{backgroundColor:q%2===0?"rgba(255,255,255,0.02)":"rgba(255,255,255,0.06)"},children:ae(K)}),e.jsx("td",{className:"text-end",style:{backgroundColor:q%2===0?"rgba(255,255,255,0.02)":"rgba(255,255,255,0.06)"},children:e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>ct(t,u.id),children:"Delete"})})]},u.id)})})]})})]}),e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-12 col-xl-7",children:e.jsxs("div",{className:"card p-3 h-100 border",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Customer Notes"}),e.jsx("textarea",{className:"form-control mb-3",rows:"3",value:a.notes||"",onChange:u=>s("notes",u.target.value),placeholder:"Notes visible on document"}),e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Terms & Conditions"}),e.jsx("textarea",{className:"form-control",rows:"3",value:a.termsText||"",onChange:u=>s("termsText",u.target.value),placeholder:"Terms and conditions"})]})}),e.jsx("div",{className:"col-12 col-xl-5",children:e.jsxs("div",{className:"card p-3 h-100 border",children:[e.jsx("h6",{className:"mb-3",children:"Summary"}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{className:"text-secondary",children:"Sub Total"}),e.jsx("strong",{children:ae(c.subtotal)})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{className:"text-secondary",children:"GST / Tax"}),e.jsx("strong",{children:ae(c.taxTotal)})]}),e.jsxs("div",{className:"d-flex justify-content-between pt-2 border-top",children:[e.jsx("span",{className:"fw-semibold",children:"Total"}),e.jsx("strong",{children:ae(c.grandTotal)})]})]})})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",children:C?`Update ${H}`:`Create ${H}`}),C?e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:D,children:"Cancel Edit"}):null]})]})]})}function oe({kind:t,rows:a,statusOptions:s}){const c=o.gstTemplates||[];return e.jsx(Q,{title:t==="estimate"?"Estimate List":"Invoice List",badgeLabel:`${a.length} items`,rows:a,withoutOuterCard:l==="overview",columns:[{key:"docNo",label:t==="estimate"?"Estimate No":"Invoice No"},{key:"customerName",label:"Customer"},{key:"issueDate",label:"Date"},{key:"dueDate",label:"Due Date"},{key:"total",label:"Total"},{key:"gstTemplateId",label:"GST Template"},{key:"status",label:"Status"}],searchPlaceholder:`Search ${t}s`,noRowsText:"No records yet.",searchBy:d=>[d.docNo,d.customerName,d.status,d.issueDate,d.dueDate].join(" "),renderCells:d=>{const D=de(d,c);return[e.jsx("span",{className:"fw-semibold",children:d.docNo||"-"}),d.customerName||"-",d.issueDate||"-",d.dueDate||"-",ae(D.grandTotal),Ee(d.gstTemplateId),e.jsx("select",{className:"form-select form-select-sm",value:d.status||s[0],onChange:C=>ut(t,d.id,C.target.value),children:s.map(C=>e.jsx("option",{value:C,children:C},C))})]},renderActions:d=>e.jsxs("div",{className:"d-inline-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-light",onClick:()=>ot(t,d.id),children:"Print / PDF"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:()=>mt(t,d),children:"Edit"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>dt(t,d.id),children:"Delete"})]})})}return e.jsxs("div",{className:"d-flex flex-column gap-3",children:[L?e.jsx("div",{className:"card p-3 text-secondary",children:"Loading accounts workspace..."}):null,e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Accounts"}),e.jsx("p",{className:"text-secondary mb-3",children:"Complete billing workflow with GST templates, billing templates, estimates, invoices, and status updates."}),x?e.jsx("div",{className:"d-flex flex-wrap align-items-center gap-2 mb-2",children:e.jsx("span",{className:"small text-danger",children:x})}):null,e.jsx("div",{className:"d-flex flex-wrap gap-2",children:[{key:"overview",label:"Overview"},{key:"invoices",label:"Invoices"},{key:"estimates",label:"Estimates"},{key:"gst",label:"GST Templates"},{key:"templates",label:"Billing Templates"},{key:"customers",label:"Customers"},{key:"items",label:"Items"}].map(t=>e.jsx("button",{type:"button",className:`btn btn-sm ${l===t.key?"btn-success":"btn-outline-light"}`,onClick:()=>h(t.key),children:t.label},t.key))})]}),e.jsx("div",{className:"row g-3",children:Be.map(t=>e.jsx("div",{className:"col-12 col-md-6 col-xl-3",children:e.jsxs("div",{className:"card p-3 h-100 d-flex flex-column align-items-center justify-content-center text-center",children:[e.jsx("div",{className:"stat-icon stat-icon-primary mb-2",children:e.jsx("i",{className:`bi ${t.icon||"bi-grid"}`,"aria-hidden":"true"})}),e.jsx("div",{className:"text-secondary small",children:t.label}),e.jsx("h5",{className:"mb-0 mt-1",children:t.value})]})},t.label))}),l==="overview"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-12 col-xl-6",children:e.jsx(oe,{kind:"invoice",rows:o.invoices||[],statusOptions:$e})}),e.jsx("div",{className:"col-12 col-xl-6",children:e.jsx(oe,{kind:"estimate",rows:o.estimates||[],statusOptions:_e})})]})}):null,l==="gst"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{title:"GST Template List",badgeLabel:`${(o.gstTemplates||[]).length} templates`,rows:o.gstTemplates||[],columns:[{key:"name",label:"Template Name"},{key:"taxScope",label:"Scope"},{key:"cgst",label:"CGST"},{key:"sgst",label:"SGST"},{key:"igst",label:"IGST"},{key:"cess",label:"CESS"},{key:"total",label:"Total"},{key:"status",label:"Status"}],searchPlaceholder:"Search GST templates",noRowsText:"No GST templates yet.",searchBy:t=>[t.name,t.taxScope,t.status,t.notes].join(" "),renderCells:t=>[e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",children:t.name}),e.jsx("div",{className:"small text-secondary",children:t.notes||"-"})]}),t.taxScope,`${t.cgst}%`,`${t.sgst}%`,`${t.igst}%`,`${t.cess}%`,`${Ne(t)}%`,e.jsx("select",{className:"form-select form-select-sm",value:t.status||"Active",onChange:a=>qe(t.id,a.target.value),children:me.map(a=>e.jsx("option",{value:a,children:a},a))})],renderActions:t=>e.jsxs("div",{className:"d-inline-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:()=>Je(t),children:"Edit"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>We(t.id),children:"Delete"})]})}),e.jsxs("div",{className:"card p-3",children:[e.jsx("h6",{className:"mb-3",children:I?"Edit GST Template":"Create GST Template"}),e.jsxs("form",{className:"d-flex flex-column gap-3",onSubmit:Ye,children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-xl-4",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Template Name"}),e.jsx("input",{className:"form-control",value:E.name||"",onChange:t=>A(a=>({...a,name:t.target.value})),placeholder:"India GST 18%"})]}),e.jsxs("div",{className:"col-12 col-xl-2",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Scope"}),e.jsxs("select",{className:"form-select",value:E.taxScope||"Intra State",onChange:t=>A(a=>({...a,taxScope:t.target.value})),children:[e.jsx("option",{value:"Intra State",children:"Intra State"}),e.jsx("option",{value:"Inter State",children:"Inter State"}),e.jsx("option",{value:"Export",children:"Export"})]})]}),e.jsxs("div",{className:"col-6 col-md-3 col-xl-1",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"CGST %"}),e.jsx("input",{className:"form-control",value:E.cgst||"",onChange:t=>A(a=>({...a,cgst:t.target.value}))})]}),e.jsxs("div",{className:"col-6 col-md-3 col-xl-1",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"SGST %"}),e.jsx("input",{className:"form-control",value:E.sgst||"",onChange:t=>A(a=>({...a,sgst:t.target.value}))})]}),e.jsxs("div",{className:"col-6 col-md-3 col-xl-1",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"IGST %"}),e.jsx("input",{className:"form-control",value:E.igst||"",onChange:t=>A(a=>({...a,igst:t.target.value}))})]}),e.jsxs("div",{className:"col-6 col-md-3 col-xl-1",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"CESS %"}),e.jsx("input",{className:"form-control",value:E.cess||"",onChange:t=>A(a=>({...a,cess:t.target.value}))})]}),e.jsxs("div",{className:"col-12 col-xl-2",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Status"}),e.jsx("select",{className:"form-select",value:E.status||"Active",onChange:t=>A(a=>({...a,status:t.target.value})),children:me.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Notes"}),e.jsx("textarea",{className:"form-control",rows:"2",value:E.notes||"",onChange:t=>A(a=>({...a,notes:t.target.value})),placeholder:"Template notes"})]})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",children:I?"Update GST Template":"Create GST Template"}),I?e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:he,children:"Cancel"}):null]})]})]})]}):null,l==="customers"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card p-3",children:[e.jsx("h6",{className:"mb-3",children:k?"Edit Customer":"Create Customer"}),e.jsxs("form",{className:"d-flex flex-column gap-3",onSubmit:Ke,children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-xl-4",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Company Name"}),e.jsx("input",{className:"form-control",value:i.companyName||"",onChange:t=>g(a=>({...a,companyName:t.target.value,name:t.target.value})),placeholder:"Company name"})]}),e.jsxs("div",{className:"col-12 col-xl-4",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Client Name"}),e.jsx("input",{className:"form-control",value:i.clientName||"",onChange:t=>g(a=>({...a,clientName:t.target.value})),placeholder:"Client / Contact person"})]}),e.jsxs("div",{className:"col-12 col-xl-4",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"GSTIN"}),e.jsx("input",{className:"form-control",value:i.gstin||"",onChange:t=>g(a=>({...a,gstin:t.target.value})),placeholder:"GSTIN"})]}),e.jsxs("div",{className:"col-12 col-xl-6",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Phone Number"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("select",{className:"form-select",style:{maxWidth:"110px"},value:i.phoneCountryCode||"+91",onChange:t=>g(a=>({...a,phoneCountryCode:t.target.value})),children:fe.map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("input",{className:"form-control",value:i.phone||"",onChange:t=>g(a=>({...a,phone:t.target.value})),placeholder:"Phone number"}),e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",title:"Add Contact Number",onClick:()=>g(t=>({...t,additionalPhones:[...t.additionalPhones||[],{countryCode:"+91",number:""}]})),children:"+"})]})]}),e.jsxs("div",{className:"col-12 col-xl-6",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Email ID"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("input",{className:"form-control",value:i.email||"",onChange:t=>g(a=>({...a,email:t.target.value})),placeholder:"Primary email"}),e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",title:"Add Email ID",onClick:()=>g(t=>({...t,additionalEmails:[...t.additionalEmails||[],""]})),children:"+"})]})]}),e.jsx("div",{className:"col-12 col-xl-6",children:(i.additionalEmails||[]).map((t,a)=>e.jsxs("div",{className:"d-flex gap-2 mb-2",children:[e.jsx("input",{className:"form-control",value:t||"",placeholder:"Additional email ID",onChange:s=>g(c=>({...c,additionalEmails:(c.additionalEmails||[]).map((d,D)=>D===a?s.target.value:d)}))}),e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>g(s=>({...s,additionalEmails:(s.additionalEmails||[]).filter((c,d)=>d!==a)})),children:"x"})]},`email-${a}`))}),e.jsx("div",{className:"col-12",children:(i.additionalPhones||[]).map((t,a)=>e.jsxs("div",{className:"d-flex gap-2 mb-2",children:[e.jsx("select",{className:"form-select",style:{maxWidth:"110px"},value:t.countryCode||"+91",onChange:s=>g(c=>({...c,additionalPhones:(c.additionalPhones||[]).map((d,D)=>D===a?{...d,countryCode:s.target.value}:d)})),children:fe.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("input",{className:"form-control",value:t.number||"",placeholder:"Additional contact number",onChange:s=>g(c=>({...c,additionalPhones:(c.additionalPhones||[]).map((d,D)=>D===a?{...d,number:s.target.value}:d)}))}),e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>g(s=>({...s,additionalPhones:(s.additionalPhones||[]).filter((c,d)=>d!==a)})),children:"x"})]},`phone-${a}`))}),e.jsxs("div",{className:"col-12 col-xl-6",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Billing Address"}),e.jsx("textarea",{className:"form-control",rows:"2",value:i.billingAddress||"",onChange:t=>g(a=>({...a,billingAddress:t.target.value})),placeholder:"Billing address"})]}),e.jsxs("div",{className:"col-12 col-xl-6",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Shipping Address"}),e.jsx("textarea",{className:"form-control",rows:"2",value:i.shippingAddress||"",onChange:t=>g(a=>({...a,shippingAddress:t.target.value})),placeholder:"Shipping address"})]}),e.jsxs("div",{className:"col-12 col-md-3",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Country"}),e.jsx("select",{className:"form-select",value:i.country||"India",onChange:t=>g(a=>({...a,country:t.target.value,state:""})),children:gt.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"col-12 col-md-3",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"State"}),pe.length?e.jsxs("select",{className:"form-select",value:i.state||"",onChange:t=>g(a=>({...a,state:t.target.value})),children:[e.jsx("option",{value:"",children:"Select State"}),pe.map(t=>e.jsx("option",{value:t,children:t},t))]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"form-control",list:"baerp-state-options",value:i.state||"",onChange:t=>g(a=>({...a,state:t.target.value})),placeholder:"State / Province / Region"}),e.jsx("datalist",{id:"baerp-state-options",children:pe.map(t=>e.jsx("option",{value:t},t))})]})]}),e.jsxs("div",{className:"col-12 col-md-3",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"City"}),e.jsx("input",{className:"form-control",value:i.city||"",onChange:t=>g(a=>({...a,city:t.target.value})),placeholder:"City"})]}),e.jsxs("div",{className:"col-12 col-md-3",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Pincode"}),e.jsx("input",{className:"form-control",value:i.pincode||"",onChange:t=>g(a=>({...a,pincode:t.target.value})),placeholder:"Pincode"})]})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",children:k?"Update Customer":"Create Customer"}),k?e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:ge,children:"Cancel"}):null]})]})]}),e.jsx(Q,{title:"Client List",badgeLabel:`${(o.customers||[]).length} clients`,rows:o.customers||[],columns:[{key:"companyName",label:"Company Name"},{key:"clientName",label:"Client Name"},{key:"gstin",label:"GSTIN"},{key:"phones",label:"Contact Number"},{key:"emails",label:"Email ID"},{key:"location",label:"Location"}],searchPlaceholder:"Search clients",noRowsText:"No clients yet.",searchBy:t=>[t.companyName||t.name,t.clientName,t.gstin,...ke(t),...Ce(t),t.country,t.state,t.city,t.pincode].join(" "),renderCells:t=>[e.jsx("span",{className:"fw-semibold",children:t.companyName||t.name||"-"}),t.clientName||"-",t.gstin||"-",e.jsx("span",{style:{whiteSpace:"normal"},children:ke(t).join(", ")||"-"}),e.jsx("span",{style:{whiteSpace:"normal"},children:Ce(t).join(", ")||"-"}),e.jsx("span",{style:{whiteSpace:"normal"},children:[t.city,t.state,t.country,t.pincode].filter(Boolean).join(", ")||"-"})],renderActions:t=>e.jsxs("div",{className:"d-inline-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:()=>et(t),children:"Edit"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>tt(t.id),children:"Delete"})]})})]}):null,l==="items"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{title:"Item Master List",badgeLabel:`${(o.itemMasters||[]).length} items`,rows:o.itemMasters||[],columns:[{key:"name",label:"Item Name"},{key:"sku",label:"SKU"},{key:"unit",label:"Unit"},{key:"defaultRate",label:"Default Rate"},{key:"taxPercent",label:"Tax %"}],searchPlaceholder:"Search items",noRowsText:"No item masters yet.",searchBy:t=>[t.name,t.sku,t.unit,t.defaultRate,t.taxPercent].join(" "),renderCells:t=>[e.jsx("span",{className:"fw-semibold",children:t.name||"-"}),t.sku||"-",t.unit||"-",t.defaultRate||"-",t.taxPercent||"-"],renderActions:t=>e.jsxs("div",{className:"d-inline-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:()=>st(t),children:"Edit"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>lt(t.id),children:"Delete"})]})}),e.jsxs("div",{className:"card p-3",children:[e.jsx("h6",{className:"mb-3",children:te?"Edit Item Master":"Create Item Master"}),e.jsxs("form",{className:"d-flex flex-column gap-3",onSubmit:at,children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-xl-4",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Item Name"}),e.jsx("input",{className:"form-control",value:F.name||"",onChange:t=>z(a=>({...a,name:t.target.value})),placeholder:"Item name"})]}),e.jsxs("div",{className:"col-12 col-xl-2",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"SKU"}),e.jsx("input",{className:"form-control",value:F.sku||"",onChange:t=>z(a=>({...a,sku:t.target.value})),placeholder:"SKU"})]}),e.jsxs("div",{className:"col-12 col-xl-2",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Unit"}),e.jsx("input",{className:"form-control",value:F.unit||"",onChange:t=>z(a=>({...a,unit:t.target.value})),placeholder:"Nos"})]}),e.jsxs("div",{className:"col-12 col-xl-2",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Default Rate"}),e.jsx("input",{className:"form-control",value:F.defaultRate||"",onChange:t=>z(a=>({...a,defaultRate:t.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{className:"col-12 col-xl-2",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Tax %"}),e.jsx("input",{className:"form-control",value:F.taxPercent||"",onChange:t=>z(a=>({...a,taxPercent:t.target.value})),placeholder:"18"})]})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",children:te?"Update Item":"Create Item"}),te?e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:xe,children:"Cancel"}):null]})]})]})]}):null,l==="templates"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{title:"Billing Template List",badgeLabel:`${(o.billingTemplates||[]).length} templates`,rows:o.billingTemplates||[],columns:[{key:"name",label:"Template"},{key:"docType",label:"Type"},{key:"gstTemplateId",label:"GST Template"},{key:"prefix",label:"Prefix"},{key:"themeColor",label:"Theme"},{key:"status",label:"Status"}],searchPlaceholder:"Search billing templates",noRowsText:"No billing templates yet.",searchBy:t=>[t.name,t.docType,t.prefix,t.status,t.footerNote].join(" "),renderCells:t=>[e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",children:t.name}),e.jsx("div",{className:"small text-secondary",children:t.footerNote||"-"})]}),t.docType,Ee(t.gstTemplateId),t.prefix||"-",e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{style:{width:14,height:14,borderRadius:4,background:t.themeColor||"#22c55e",display:"inline-block"}}),e.jsx("span",{children:t.themeColor||"-"})]}),e.jsx("select",{className:"form-select form-select-sm",value:t.status||"Active",onChange:a=>Xe(t.id,a.target.value),children:me.map(a=>e.jsx("option",{value:a,children:a},a))})],renderActions:t=>e.jsxs("div",{className:"d-inline-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:()=>Qe(t),children:"Edit"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>Ze(t.id),children:"Delete"})]})}),e.jsxs("div",{className:"card p-3",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h6",{className:"mb-0",children:f?"Edit Billing Template":"Create Billing Template"}),e.jsx("span",{className:"badge bg-dark border",children:"GST Template option included"})]}),e.jsxs("form",{className:"d-flex flex-column gap-3",onSubmit:ze,children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-xl-4",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Template Name"}),e.jsx("input",{className:"form-control",value:r.name||"",onChange:t=>b(a=>({...a,name:t.target.value})),placeholder:"Default GST Invoice Template"})]}),e.jsxs("div",{className:"col-12 col-md-4 col-xl-2",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Document Type"}),e.jsxs("select",{className:"form-select",value:r.docType||"Invoice",onChange:t=>b(a=>({...a,docType:t.target.value})),children:[e.jsx("option",{value:"Invoice",children:"Invoice"}),e.jsx("option",{value:"Estimate",children:"Estimate"})]})]}),e.jsxs("div",{className:"col-12 col-md-4 col-xl-3",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"GST Template"}),e.jsxs("select",{className:"form-select",value:r.gstTemplateId||"",onChange:t=>b(a=>({...a,gstTemplateId:t.target.value})),children:[e.jsx("option",{value:"",children:"Select GST Template"}),(o.gstTemplates||[]).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"col-12 col-md-4 col-xl-1",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Prefix"}),e.jsx("input",{className:"form-control",value:r.prefix||"",onChange:t=>b(a=>({...a,prefix:t.target.value})),placeholder:"INV"})]}),e.jsxs("div",{className:"col-12 col-md-4 col-xl-1",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Color"}),e.jsx("input",{type:"color",className:"form-control form-control-color w-100",value:r.themeColor||"#22c55e",onChange:t=>b(a=>({...a,themeColor:t.target.value}))})]}),e.jsxs("div",{className:"col-12 col-md-4 col-xl-1",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Status"}),e.jsx("select",{className:"form-select",value:r.status||"Active",onChange:t=>b(a=>({...a,status:t.target.value})),children:me.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"col-12 col-xl-6",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Footer Note"}),e.jsx("input",{className:"form-control",value:r.footerNote||"",onChange:t=>b(a=>({...a,footerNote:t.target.value})),placeholder:"Thank you for your business"})]}),e.jsxs("div",{className:"col-12 col-xl-6",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:"Terms Text"}),e.jsx("input",{className:"form-control",value:r.termsText||"",onChange:t=>b(a=>({...a,termsText:t.target.value})),placeholder:"Payment terms and conditions"})]})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",children:f?"Update Billing Template":"Create Billing Template"}),f?e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:be,children:"Cancel"}):null]})]})]})]}):null,l==="estimates"?e.jsxs(e.Fragment,{children:[e.jsx(oe,{kind:"estimate",rows:o.estimates||[],statusOptions:_e}),e.jsx(Ae,{kind:"estimate",form:_,setField:(t,a)=>Te("estimate",t,a),totals:pt,onSave:t=>De("estimate",t),onCancelEdit:()=>{P(""),M(Z("estimate"))},editingId:y})]}):null,l==="invoices"?e.jsxs(e.Fragment,{children:[e.jsx(oe,{kind:"invoice",rows:o.invoices||[],statusOptions:$e}),e.jsx(Ae,{kind:"invoice",form:Y,setField:(t,a)=>Te("invoice",t,a),totals:ht,onSave:t=>De("invoice",t),onCancelEdit:()=>{j(""),n(Z("invoice"))},editingId:m})]}):null]})}function Ft({heading:l,moduleData:h}){return e.jsxs("div",{className:"d-flex flex-column gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:l}),e.jsx("p",{className:"text-secondary mb-0",children:h.subtitle})]}),e.jsx("div",{className:"row g-3",children:(h.stats||[]).map(o=>e.jsx("div",{className:"col-12 col-md-4",children:e.jsxs("div",{className:"card p-3 h-100",children:[e.jsx("div",{className:"text-secondary small",children:o.label}),e.jsx("h5",{className:"mb-0 mt-1",children:o.value})]})},o.label))}),e.jsxs("div",{className:"card p-3",children:[e.jsx("h6",{className:"mb-3",children:"Enabled Features"}),e.jsx("div",{className:"d-flex flex-column gap-2",children:(h.sections||[]).map(o=>e.jsxs("div",{className:"d-flex align-items-center justify-content-between border rounded px-2 py-2",children:[e.jsx("span",{children:o}),e.jsx("span",{className:"badge bg-success",children:"Ready"})]},o))})]})]})}function Vt({moduleKey:l="crm",title:h}){const o=Oe[l]||Oe.crm,N=h||o.title;return l==="crm"?e.jsx(Rt,{}):l==="projects"?e.jsx(Ot,{}):l==="hrm"?e.jsx(_t,{}):l==="ticketing"?e.jsx($t,{}):l==="stocks"?e.jsx(wt,{}):l==="accounts"?e.jsx(Gt,{}):e.jsx(Ft,{heading:N,moduleData:o})}export{Vt as default};
