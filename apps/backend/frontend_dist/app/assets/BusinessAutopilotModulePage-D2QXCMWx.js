import{j as e,r as o}from"./index-BljK_PEl.js";const T="wz_business_autopilot_projects_module",R="wz_business_autopilot_hr_module",A={crm:{title:"CRM",subtitle:"Manage leads, deals, and customer follow-ups.",stats:[{label:"Open Leads",value:"24"},{label:"Pipeline Value",value:"INR 8.4L"},{label:"Follow-ups Today",value:"11"}],sections:["Lead pipeline board","Deal stage tracking","Activity timeline","Contact import/export"]},hrm:{title:"HR Management",subtitle:"Handle employees, attendance, and payroll workflows.",stats:[{label:"Employees",value:"42"},{label:"Attendance Today",value:"89%"},{label:"Pending Leaves",value:"6"}],sections:["Employee directory","Attendance and shifts","Leave approvals","Payroll run setup"]},projects:{title:"Project Management",subtitle:"Track project milestones, tasks, and team delivery."},accounts:{title:"Accounts / ERP",subtitle:"Control billing, expenses, GST, and accounting reports.",stats:[{label:"Invoices This Month",value:"126"},{label:"Receivables",value:"INR 3.2L"},{label:"GST Status",value:"Ready"}],sections:["Invoice and billing","Expense tracking","GST reports","Vendor and purchase entries"]}},f={projects:{label:"Projects",itemLabel:"Project",columns:[{key:"name",label:"Project Name"},{key:"owner",label:"Owner"},{key:"status",label:"Status"}],fields:[{key:"name",label:"Project Name",placeholder:"Enter project name"},{key:"owner",label:"Owner",placeholder:"Enter owner name"},{key:"status",label:"Status",placeholder:"Active / Planned / Hold"}]},tasks:{label:"Tasks",itemLabel:"Task",columns:[{key:"title",label:"Task"},{key:"assignee",label:"Assignee"},{key:"dueDate",label:"Due Date"}],fields:[{key:"title",label:"Task",placeholder:"Enter task title"},{key:"assignee",label:"Assignee",placeholder:"Enter assignee name"},{key:"dueDate",label:"Due Date",placeholder:"YYYY-MM-DD"}]},milestones:{label:"Milestones",itemLabel:"Milestone",columns:[{key:"title",label:"Milestone"},{key:"project",label:"Project"},{key:"targetDate",label:"Target Date"}],fields:[{key:"title",label:"Milestone",placeholder:"Enter milestone title"},{key:"project",label:"Project",placeholder:"Enter project name"},{key:"targetDate",label:"Target Date",placeholder:"YYYY-MM-DD"}]},team:{label:"Team",itemLabel:"Team Member",columns:[{key:"name",label:"Name"},{key:"role",label:"Role"},{key:"project",label:"Project"}],fields:[{key:"name",label:"Name",placeholder:"Enter member name"},{key:"role",label:"Role",placeholder:"Enter role"},{key:"project",label:"Project",placeholder:"Enter project name"}]}},P={projects:[{id:"p1",name:"ERP Rollout",owner:"Guru",status:"Active"},{id:"p2",name:"HR Automation",owner:"Nithya",status:"Planned"}],tasks:[{id:"t1",title:"Finalize sprint board",assignee:"Guru",dueDate:"2026-02-20"},{id:"t2",title:"Client approval review",assignee:"Arun",dueDate:"2026-02-22"}],milestones:[{id:"m1",title:"Phase 1 Go-Live",project:"ERP Rollout",targetDate:"2026-03-10"},{id:"m2",title:"Payroll Cutover",project:"HR Automation",targetDate:"2026-03-25"}],team:[{id:"u1",name:"Guru",role:"Project Manager",project:"ERP Rollout"},{id:"u2",name:"Nithya",role:"Business Analyst",project:"HR Automation"}]},N={employees:{label:"Employees",itemLabel:"Employee",columns:[{key:"name",label:"Name"},{key:"department",label:"Department"},{key:"designation",label:"Designation"}],fields:[{key:"name",label:"Name",placeholder:"Enter employee name"},{key:"department",label:"Department",placeholder:"HR / Sales / Engineering"},{key:"designation",label:"Designation",placeholder:"Executive / Manager"}]},attendance:{label:"Attendance",itemLabel:"Attendance Entry",columns:[{key:"employee",label:"Employee"},{key:"date",label:"Date"},{key:"status",label:"Status"}],fields:[{key:"employee",label:"Employee",placeholder:"Enter employee name"},{key:"date",label:"Date",placeholder:"YYYY-MM-DD"},{key:"status",label:"Status",placeholder:"Present / Half Day / Leave"}]},leaves:{label:"Leaves",itemLabel:"Leave Request",columns:[{key:"employee",label:"Employee"},{key:"leaveType",label:"Leave Type"},{key:"status",label:"Status"}],fields:[{key:"employee",label:"Employee",placeholder:"Enter employee name"},{key:"leaveType",label:"Leave Type",placeholder:"Sick / Casual / Paid"},{key:"status",label:"Status",placeholder:"Pending / Approved / Rejected"}]},payroll:{label:"Payroll",itemLabel:"Payroll Entry",columns:[{key:"employee",label:"Employee"},{key:"month",label:"Month"},{key:"salary",label:"Net Salary"}],fields:[{key:"employee",label:"Employee",placeholder:"Enter employee name"},{key:"month",label:"Month",placeholder:"YYYY-MM"},{key:"salary",label:"Net Salary",placeholder:"INR amount"}]}},C={employees:[{id:"e1",name:"Guru",department:"Engineering",designation:"Project Lead"},{id:"e2",name:"Nithya",department:"HR",designation:"HR Executive"}],attendance:[{id:"a1",employee:"Guru",date:"2026-02-19",status:"Present"},{id:"a2",employee:"Nithya",date:"2026-02-19",status:"Present"}],leaves:[{id:"l1",employee:"Arun",leaveType:"Sick",status:"Pending"},{id:"l2",employee:"Kiran",leaveType:"Casual",status:"Approved"}],payroll:[{id:"pr1",employee:"Guru",month:"2026-02",salary:"INR 85,000"},{id:"pr2",employee:"Nithya",month:"2026-02",salary:"INR 42,000"}]};function g(t){return t.reduce((r,s)=>(r[s.key]="",r),{})}function L(t){return t&&typeof t=="object"&&Object.keys(f).every(r=>Array.isArray(t[r]))}function M(t){return t&&typeof t=="object"&&Object.keys(N).every(r=>Array.isArray(t[r]))}function w(){const[t,r]=o.useState("projects"),[s,m]=o.useState(P),[p,u]=o.useState(g(f.projects.fields)),[d,y]=o.useState("");o.useEffect(()=>{try{const l=window.localStorage.getItem(T);if(!l)return;const a=JSON.parse(l);L(a)&&m(a)}catch{}},[]),o.useEffect(()=>{window.localStorage.setItem(T,JSON.stringify(s))},[s]),o.useEffect(()=>{y(""),u(g(f[t].fields))},[t]);const n=f[t],h=s[t]||[],k=o.useMemo(()=>{const l=(s.projects||[]).filter(i=>i.status.toLowerCase()==="active").length,a=(s.tasks||[]).length,c=(s.tasks||[]).filter(i=>{const b=Date.parse(i.dueDate);return Number.isFinite(b)&&b<Date.now()}).length;return[{label:"Active Projects",value:String(l)},{label:"Tasks",value:String(a)},{label:"Overdue Tasks",value:String(c)}]},[s]);function v(l,a){u(c=>({...c,[l]:a}))}function E(l){y(l.id);const a={};n.fields.forEach(c=>{a[c.key]=l[c.key]||""}),u(a)}function x(){y(""),u(g(n.fields))}function S(l){m(a=>({...a,[t]:(a[t]||[]).filter(c=>c.id!==l)})),d===l&&x()}function D(l){if(l.preventDefault(),n.fields.some(i=>!String(p[i.key]||"").trim()))return;const c={};n.fields.forEach(i=>{c[i.key]=String(p[i.key]).trim()}),m(i=>{const b=i[t]||[];return d?{...i,[t]:b.map(j=>j.id===d?{...j,...c}:j)}:{...i,[t]:[{id:`${t}_${Date.now()}`,...c},...b]}}),x()}return e.jsxs("div",{className:"d-flex flex-column gap-3",children:[e.jsxs("div",{className:"card p-3",children:[e.jsx("h4",{className:"mb-2",children:"Project Management"}),e.jsx("p",{className:"text-secondary mb-3",children:"Track project milestones, tasks, and team delivery."}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Object.entries(f).map(([l,a])=>e.jsx("button",{type:"button",className:`btn btn-sm ${t===l?"btn-success":"btn-outline-light"}`,onClick:()=>r(l),children:a.label},l))})]}),e.jsx("div",{className:"row g-3",children:k.map(l=>e.jsx("div",{className:"col-12 col-md-4",children:e.jsxs("div",{className:"card p-3 h-100",children:[e.jsx("div",{className:"text-secondary small",children:l.label}),e.jsx("h5",{className:"mb-0 mt-1",children:l.value})]})},l.label))}),e.jsxs("div",{className:"card p-3",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h6",{className:"mb-0",children:n.label}),e.jsxs("span",{className:"badge bg-secondary",children:[h.length," items"]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-dark table-borderless align-middle mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[n.columns.map(l=>e.jsx("th",{children:l.label},l.key)),e.jsx("th",{className:"text-end",children:"Action"})]})}),e.jsx("tbody",{children:h.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:n.columns.length+1,className:"text-secondary",children:["No ",n.label.toLowerCase()," yet."]})}):h.map(l=>e.jsxs("tr",{children:[n.columns.map(a=>e.jsx("td",{children:l[a.key]||"-"},`${l.id}_${a.key}`)),e.jsx("td",{className:"text-end",children:e.jsxs("div",{className:"d-inline-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:()=>E(l),children:"Edit"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>S(l.id),children:"Delete"})]})})]},l.id))})]})})]}),e.jsxs("div",{className:"card p-3",children:[e.jsx("h6",{className:"mb-3",children:d?`Edit ${n.itemLabel}`:`Create ${n.itemLabel}`}),e.jsxs("form",{className:"d-flex flex-column gap-3",onSubmit:D,children:[e.jsx("div",{className:"row g-3",children:n.fields.map(l=>e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:l.label}),e.jsx("input",{type:"text",className:"form-control",placeholder:l.placeholder,value:p[l.key]||"",onChange:a=>v(l.key,a.target.value)})]},l.key))}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",children:d?"Update":"Create"}),d?e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:x,children:"Cancel"}):null]})]})]})]})}function _(){const[t,r]=o.useState("employees"),[s,m]=o.useState(C),[p,u]=o.useState(g(N.employees.fields)),[d,y]=o.useState("");o.useEffect(()=>{try{const l=window.localStorage.getItem(R);if(!l)return;const a=JSON.parse(l);M(a)&&m(a)}catch{}},[]),o.useEffect(()=>{window.localStorage.setItem(R,JSON.stringify(s))},[s]),o.useEffect(()=>{y(""),u(g(N[t].fields))},[t]);const n=N[t],h=s[t]||[],k=o.useMemo(()=>{const l=(s.employees||[]).length,a=(s.attendance||[]).filter(i=>String(i.status||"").toLowerCase().includes("present")).length,c=(s.leaves||[]).filter(i=>String(i.status||"").toLowerCase()==="pending").length;return[{label:"Employees",value:String(l)},{label:"Attendance Today",value:String(a)},{label:"Pending Leaves",value:String(c)}]},[s]);function v(l,a){u(c=>({...c,[l]:a}))}function E(l){y(l.id);const a={};n.fields.forEach(c=>{a[c.key]=l[c.key]||""}),u(a)}function x(){y(""),u(g(n.fields))}function S(l){m(a=>({...a,[t]:(a[t]||[]).filter(c=>c.id!==l)})),d===l&&x()}function D(l){if(l.preventDefault(),n.fields.some(i=>!String(p[i.key]||"").trim()))return;const c={};n.fields.forEach(i=>{c[i.key]=String(p[i.key]).trim()}),m(i=>{const b=i[t]||[];return d?{...i,[t]:b.map(j=>j.id===d?{...j,...c}:j)}:{...i,[t]:[{id:`${t}_${Date.now()}`,...c},...b]}}),x()}return e.jsxs("div",{className:"d-flex flex-column gap-3",children:[e.jsxs("div",{className:"card p-3",children:[e.jsx("h4",{className:"mb-2",children:"HR Management"}),e.jsx("p",{className:"text-secondary mb-3",children:"Handle employees, attendance, leave approvals, and payroll."}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Object.entries(N).map(([l,a])=>e.jsx("button",{type:"button",className:`btn btn-sm ${t===l?"btn-success":"btn-outline-light"}`,onClick:()=>r(l),children:a.label},l))})]}),e.jsx("div",{className:"row g-3",children:k.map(l=>e.jsx("div",{className:"col-12 col-md-4",children:e.jsxs("div",{className:"card p-3 h-100",children:[e.jsx("div",{className:"text-secondary small",children:l.label}),e.jsx("h5",{className:"mb-0 mt-1",children:l.value})]})},l.label))}),e.jsxs("div",{className:"card p-3",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h6",{className:"mb-0",children:n.label}),e.jsxs("span",{className:"badge bg-secondary",children:[h.length," items"]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-dark table-borderless align-middle mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[n.columns.map(l=>e.jsx("th",{children:l.label},l.key)),e.jsx("th",{className:"text-end",children:"Action"})]})}),e.jsx("tbody",{children:h.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:n.columns.length+1,className:"text-secondary",children:["No ",n.label.toLowerCase()," yet."]})}):h.map(l=>e.jsxs("tr",{children:[n.columns.map(a=>e.jsx("td",{children:l[a.key]||"-"},`${l.id}_${a.key}`)),e.jsx("td",{className:"text-end",children:e.jsxs("div",{className:"d-inline-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:()=>E(l),children:"Edit"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>S(l.id),children:"Delete"})]})})]},l.id))})]})})]}),e.jsxs("div",{className:"card p-3",children:[e.jsx("h6",{className:"mb-3",children:d?`Edit ${n.itemLabel}`:`Create ${n.itemLabel}`}),e.jsxs("form",{className:"d-flex flex-column gap-3",onSubmit:D,children:[e.jsx("div",{className:"row g-3",children:n.fields.map(l=>e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("label",{className:"form-label small text-secondary mb-1",children:l.label}),e.jsx("input",{type:"text",className:"form-control",placeholder:l.placeholder,value:p[l.key]||"",onChange:a=>v(l.key,a.target.value)})]},l.key))}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",children:d?"Update":"Create"}),d?e.jsx("button",{type:"button",className:"btn btn-outline-light btn-sm",onClick:x,children:"Cancel"}):null]})]})]})]})}function O({heading:t,moduleData:r}){return e.jsxs("div",{className:"d-flex flex-column gap-3",children:[e.jsxs("div",{className:"card p-3",children:[e.jsx("h4",{className:"mb-2",children:t}),e.jsx("p",{className:"text-secondary mb-0",children:r.subtitle})]}),e.jsx("div",{className:"row g-3",children:(r.stats||[]).map(s=>e.jsx("div",{className:"col-12 col-md-4",children:e.jsxs("div",{className:"card p-3 h-100",children:[e.jsx("div",{className:"text-secondary small",children:s.label}),e.jsx("h5",{className:"mb-0 mt-1",children:s.value})]})},s.label))}),e.jsxs("div",{className:"card p-3",children:[e.jsx("h6",{className:"mb-3",children:"Enabled Features"}),e.jsx("div",{className:"d-flex flex-column gap-2",children:(r.sections||[]).map(s=>e.jsxs("div",{className:"d-flex align-items-center justify-content-between border rounded px-2 py-2",children:[e.jsx("span",{children:s}),e.jsx("span",{className:"badge bg-success",children:"Ready"})]},s))})]})]})}function H({moduleKey:t="crm",title:r}){const s=A[t]||A.crm,m=r||s.title;return t==="projects"?e.jsx(w,{}):t==="hrm"?e.jsx(_,{}):e.jsx(O,{heading:m,moduleData:s})}export{H as default};
